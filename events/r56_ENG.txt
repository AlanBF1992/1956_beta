add_namespace = r56_eng 

# Some Mosley discourse as substitute for anti German speeches
country_event = {
	id = r56_eng.1
	title = r56_eng.1.t
	desc = r56_eng.1.desc
	picture = GFX_report_event_eng_mosley_speech

	is_triggered_only = yes
	
	# Ok
	option = {
		name = r56_eng.1.a
	}
}
country_event = {
	id = r56_eng.2
	title = r56_eng.2.t
	desc = r56_eng.2.desc
	picture = GFX_report_event_eng_mosley_speech

	is_triggered_only = yes
	
	# Ok
	option = {
		name = r56_eng.2.a
		
	}
}

country_event = {
	id = r56_eng.3
	title = r56_eng.3.t
	desc = r56_eng.3.desc
	picture = GFX_report_event_canadian_soldiers

	trigger = {
		has_country_flag = has_british_exiled_commander
	}
	fire_only_once = yes
	# Ok
	option = {
		name = r56_eng.3.a
		army_experience = 10
		navy_experience = 10
		air_experience = 10
		
	}
}
#remnant of the royal family arrive somewhere
country_event = {
	id = r56_eng.4
	title = r56_eng.4.t
	desc = r56_eng.4.desc
	picture = GFX_report_event_eng_royal_family

	is_triggered_only = yes
	
	# Ok
	option = {
		name = r56_eng.4.a
		add_ideas = ENG_royal_family_remnants
	}
}

# george_vi dies
country_event = {
	id = r56_eng.5
	title = r56_eng.5.t
	desc = r56_eng.5.desc
	picture = GFX_report_event_europe_funeral
	
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		has_idea = ENG_george_vi
	}
	
	immediate = {
		hidden_effect = {
			remove_ideas = ENG_george_vi
			add_ideas = ENG_elisabeth_ii		
		}
	}

	option = {
		name = britain.17.a
		effect_tooltip = {
			remove_ideas = ENG_george_vi
			add_ideas = ENG_elisabeth_ii	
		}
	}
}

country_event = { #return to responsible Government or federation with Canada?
	id = r56_eng.6
	title = r56_eng.6.t
	desc = r56_eng.6.desc
	picture = GFX_report_event_canadian_soldiers

	trigger = {
		tag = ENG
		date > 1947.06.6
		331 = { is_owned_and_controlled_by = ROOT }
		NOT = {
			country_exists = NFL
		}
		OR = {
			has_government = communism
			has_government = democratic #check for the British Union of Fascists?
		}
	}
	
	fire_only_once = yes

	mean_time_to_happen = { days = 60 }

	#maybe add Joey Smallwood (but pro unification with Canada-, Peter John Cashin, against unification
	# send it to Canada
	option = { 
		name = r56_eng.6.a
		ai_chance = {
			base = 75
		}
		trigger = {
			CAN = {
				OR = {
					is_puppet_of = ROOT
					is_in_faction_with = ROOT
				}
				682 = { is_owned_and_controlled_by = ROOT }
			}
		}
		effect_tooltip = {
			CAN = {
				transfer_state = 331
				transfer_state = 332
			}
		}
		hidden_effect = {
			CAN = { country_event = { id =  r56_canada.10 days = 2 } }
			news_event = { id = r56.news_event.47 days = 3 }
		}			
	}
	option = { 
		name = r56_eng.6.b
		ai_chance = {
			base = 25
		}
		add_political_power = -300
		release_puppet_on_controlled = NFL
		NFL = {
			add_political_power = 500
		}
		news_event = { id = r56.news_event.48 days = 3 }
	}	
}

#There's a limit to how many events can fit in a namespace.  To play it safe, I'm working with around 100.
#These events are for various leaders and personalities, so have a gameplay impact (so not just flavour).
#The idea is to do a bunch down the track, but this first one is a one-off because I just read Gilbertson's
#biography, and he was a legend and so get's a run.

###########################
#  Leader events
###########################

#Gilbertson - recruitment
country_event = {
	id = r56_eng.10
	title = r56_eng.10.t
	desc = r56_eng.10.d
	picture = GFX_report_event_ast_navy
	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = r56_eng.10.a
		ai_chance = { base = 85 }
		set_country_flag = ENG_terror_of_tobermory
		show_ideas_tooltip = ENG_gilbert_stephenson
		add_political_power = 25
	}

	option = {
		name = r56_eng.10.b
		ai_chance = { base = 15 }
		set_country_flag = ENG_recalled_stephenson_flag
		#After MtG add anti submarine trait -Waffle
		effect_tooltip = {
			create_navy_leader = { 
				name = "Gilbert Stephenson"
				portrait_path = "gfx/leaders/r56_generic/r56_portrait_generic_navy_europe_1.dds"
				traits = { fleet_protector destroyer_leader }
				skill = 3
				attack_skill = 3
				defense_skill = 2
				maneuvering_skill = 3
				coordination_skill = 2			
			}
		}
	}
}

#Collapse of the empire

country_event = { 
	id = r56_eng.11 
	title = r56_eng.11.t
	desc = r56_eng.11.d
	picture = GFX_report_event_MPL_british_departure
	fire_only_once = yes
	trigger = {
		original_tag = ENG
		surrender_progress > 0.7
		NOT = {
			controls_state = 126
		}
		126 = {
			controller = {
				NOT = {
					has_government = democratic
				}
			}
		}
		has_civil_war = no
		has_government = democratic
		any_subject_country = {
			OR = {
				original_tag = CAN
				original_tag = AST
				original_tag = NZL
				original_tag = SAF
			}
		}
	}
	option = {
		name = r56_eng.11.a
		126 = {
			controller = {
				
				news_event = {
					id = r56_eng.18
					days = 2
					random_hours = 12
				}
			}
		}
		custom_effect_tooltip = ENG_collapse_of_the_empire_tt
		
		hidden_effect = {
			create_country_leader = {
				name = "Fallen Government"
				picture = "portrait_eng_fallen_government.dds"
				expire = "1965.1.1"
				ideology = conservatism
				traits = {
					cabinet_crisis
				}
			}
			if = {
				limit = {
					is_ally_with = CAN
				}
				transfer_units_fraction = {
					target = CAN
					size = 0.5
					navy_ratio = 0.6
					air_ratio = 0.7
					army_ratio = 0.4
					stockpile_ratio = 0.4
				}
				set_autonomy = {
					target = CAN
					autonomy_state = autonomy_free
				}
				if = {
					limit = {
						NOT = {
							any_other_country = {
								has_idea = ENG_exiled_royal_family
							}
						}
						CAN = {
							has_capitulated = no
						}
					}
					CAN = {
						add_ideas = ENG_exiled_royal_family
						save_global_event_target_as = ENG_commonwealth_successor
						country_event = {
							id = r56_eng.12
							days = 1
						}
						if = {
							limit = {
								ENG = {
									is_faction_leader = yes
								}
							}
							set_faction_leader = yes
						}
					}
				}
				
				
				if = {
					limit = {
						owns_state = 118
						controls_state = 118
					}
					CAN  = {
						transfer_state = 118
					}
					
				}
	
				if = {
					limit = {
						owns_state = 332
						controls_state = 332
					}
					CAN = {
						transfer_state = 332
					}
				}

				if = {
					limit = {
						owns_state = 331
						controls_state = 331
					}
					CAN = {
						transfer_state = 331
					}
				}
				if = {
					limit = {
						owns_state = 331
						controls_state = 331
					}
					CAN = {
						transfer_state = 331
					}
				}
				if = {
					limit = {
						owns_state = 696
						controls_state = 696
					}
					CAN = {
						transfer_state = 696
					}
				}
				if = {
					limit = {
						owns_state = 689
						controls_state = 689
					}
					CAN = {
						transfer_state = 689
					}
				}
				if = {
					limit = {
						owns_state = 311
						controls_state = 311
					}
					CAN = {
						transfer_state = 311
					}
				}
				if = {
					limit = {
						owns_state = 690
						controls_state = 690
					}
					CAN = {
						transfer_state = 690
					}
				}
				if = {
					limit = {
						owns_state = 693
						controls_state = 693
					}
					CAN = {
						transfer_state = 693
					}
				}
				if = {
					limit = {
						owns_state = 1081
						controls_state = 1081
					}
					CAN = {
						transfer_state = 1081
					}
				}
				if = {
					limit = {
						owns_state = 308
						controls_state = 308
					}
					CAN = {
						transfer_state = 308
					}
				}
				if = {
					limit = {
						owns_state = 1082
						controls_state = 1082
					}
					CAN = {
						transfer_state = 1082
					}
				}
				if = {
					limit = {
						owns_state = 1083
						controls_state = 1083
					}
					CAN = {
						transfer_state = 1083
					}
				}
				if = {
					limit = {
						owns_state = 1084
						controls_state = 1084
					}
					CAN = {
						transfer_state = 1084
					}
				}
				if = {
					limit = {
						owns_state = 692
						controls_state = 692
					}
					CAN = {
						transfer_state = 692
					}
				}
				if = {
					limit = {
						owns_state = 1085
						controls_state = 1085
					}
					CAN = {
						transfer_state = 1085
					}
				}
				if = {
					limit = {
						owns_state = 691
						controls_state = 691
					}
					CAN = {
						transfer_state = 691
					}
				}
				if = {
					limit = {
						owns_state = 687
						controls_state = 687
					}
					CAN = {
						transfer_state = 687
					}
				}
				
				if = {
					limit = {
						owns_state = 703
						controls_state = 703
					}
					CAN = {
						transfer_state = 703
					}
				}
				
				if = {
					limit = {
						owns_state = 704
						controls_state = 704
					}
					CAN = {
						transfer_state = 704
					}
				}
				
				if = {
					limit = {
						owns_state = 299
						controls_state = 299
					}
					CAN = {
						transfer_state = 299
					}
	
					ARG = {
						country_event = { 
							id = r56_eng.16
							days = 10
						}
					}
				}
	
				
				if = {
					limit = {
						owns_state = 720 
						controls_state = 720
					}
					CAN = {
						transfer_state = 720
					}
				}
				
				
	
			}
	
			if = {
				limit = {
					is_ally_with = AST
				}
				transfer_units_fraction = {
					target = AST
					size = 0.3
					navy_ratio = 0.4
					air_ratio = 0.3
					army_ratio = 0.2
					stockpile_ratio = 0.25
				}
				set_autonomy = {
					target = AST
					autonomy_state = autonomy_free
					end_civil_wars = no
					end_wars = no
				}
				if = {
					limit = {
						NOT = {
							any_other_country = {
								has_idea = ENG_exiled_royal_family
							}
						}
						AST = {
							has_capitulated = no
						}
					}
					AST = {
						add_ideas = ENG_exiled_royal_family
						save_global_event_target_as = ENG_commonwealth_successor
						country_event = {
							id = r56_eng.12
							days = 1
						}
						if = {
							limit = {
								ENG = {
									is_faction_leader = yes
								}
							}
							set_faction_leader = yes
						}
					}
					leave_faction = yes
				}
				else = {
					AST = {
						country_event = {
							id = r56_eng.13
							days = 1
						}
					}
				}
	
				if = {
					limit = {
						owns_state = 634
						controls_state = 634
					}
					AST = {
						transfer_state = 634
					}
				}
	
				
				if = {
					limit = {
						owns_state = 639
						controls_state = 639
					}
					AST = {
						transfer_state = 639
					}
				}
	
				
				if = {
					limit = {
						owns_state = 711
						controls_state = 711
					}
					AST = {
						transfer_state = 711
					}
				}
	
				
				if = {
					limit = {
						owns_state = 712
						controls_state = 712
					}
					AST = {
						transfer_state = 712
					}
				}
	
				
				if = {
					limit = {
						owns_state = 709
						controls_state = 709
					}
					AST = {
						transfer_state = 709
					}
				}
	
				if = {
					limit = {
						owns_state = 707
						controls_state = 707
					}
					AST = {
						transfer_state = 707
					}
				}
	
				
				if = {
					limit = {
						owns_state = 710
						controls_state = 710
					}
					AST = {
						transfer_state = 710
					}
				}
			}
	
			if = {
				limit = {
					is_ally_with = SAF
				}
				set_autonomy = {
					target = SAF
					autonomy_state = autonomy_free
					end_civil_wars = no
					end_wars = no
				}
				if = {
					limit = {
						NOT = {
							any_other_country = {
								has_idea = ENG_exiled_royal_family
							}
						}
						SAF = {
							has_capitulated = no
						}
					}
					SAF = {
						add_ideas = ENG_exiled_royal_family
						save_global_event_target_as = ENG_commonwealth_successor
						country_event = {
							id = r56_eng.12
							days = 1
						}
						if = {
							limit = {
								ENG = {
									is_faction_leader = yes
								}
							}
							set_faction_leader = yes
						}
					}
					leave_faction = yes
				}
				else = {
					SAF = {
						country_event = {
							id = r56_eng.13
							days = 1
						}
					}
				}
	
				if = {
					limit = {
						owns_state = 938
						controls_state = 938
					}
					SAF = {
						transfer_state = 938
					}
				}
	
				if = {
					limit = {
						owns_state = 939
						controls_state = 939
					}
					SAF = {
						transfer_state = 939
					}
				}
	
				if = {
					limit = {
						owns_state = 542
						controls_state = 542
					}
					SAF = {
						transfer_state = 542
					}
				}
	
				if = {
					limit = {
						owns_state = 545
						controls_state = 545
					}
					SAF = {
						transfer_state = 545
					}
				}
			}
	
			if = {
				limit = {
					is_ally_with = NZL
				}
				set_autonomy = {
					target = NZL
					autonomy_state = autonomy_free
					end_civil_wars = no
					end_wars = no
				}
				
				if = {
					limit = {
						NOT = {
							any_other_country = {
								has_idea = ENG_exiled_royal_family
							}
						}
						NZL = {
							has_capitulated = no
						}
					}
					NZL = {
						add_ideas = ENG_exiled_royal_family
						save_global_event_target_as = ENG_commonwealth_successor
						country_event = {
							id = r56_eng.12
							days = 1
						}
						if = {
							limit = {
								ENG = {
									is_faction_leader = yes
								}
							}
							set_faction_leader = yes
						}
					}
					leave_faction = yes
				}
				else = {
					NZL = {
						country_event = {
							id = r56_eng.13
							days = 1
						}
					}
				}
				if = {
					limit = {
						owns_state = 734
						controls_state = 734
					}
					NZL = {
						transfer_state = 734
					}
				}
				if = {
					limit = {
						owns_state = 636
						controls_state = 636
					}
					NZL = {
						transfer_state = 636
					}
				}

				
				if = {
					limit = {
						owns_state = 270
						controls_state = 270
					}
					NZL = {
						transfer_state = 270
					}
				}
				
				if = {
					limit = {
						owns_state = 643
						controls_state = 643
					}
					NZL = {
						transfer_state = 643
					}
				}
				
				if = {
					limit = {
						owns_state = 643
						controls_state = 643
					}
					NZL = {
						transfer_state = 643
					}
				}
				
				if = {
					limit = {
						owns_state = 727
						controls_state = 727
					}
					NZL = {
						transfer_state = 727
					}
				}
				
				if = {
					limit = {
						owns_state = 720
						controls_state = 720
					}
					NZL = {
						transfer_state = 720
					}
				}
				
				if = {
					limit = {
						owns_state = 727
						controls_state = 727
					}
					NZL = {
						transfer_state = 727
					}
				}
				
			}
	
	
			if = {
				limit = {
					is_ally_with = RAJ
				}
				set_autonomy = {
					target = RAJ
					autonomy_state = autonomy_free
					end_civil_wars = no
					end_wars = no
				}
				RAJ = {
					country_event = {
						id = r56_eng.14
						days = 1
					}
				}
	
				if = {
					limit = {
						owns_state = 281
						controls_state = 281
					}
					RAJ = {
						transfer_state = 281
					}
				}
	
				
				if = {
					limit = {
						owns_state = 422
						controls_state = 422
					}
					RAJ = {
						transfer_state = 422
					}
				}
				
				
				
			}
	
			if = {
				limit = {
					is_ally_with = MAL
				}
				set_autonomy = {
					target = MAL
					autonomy_state = autonomy_free
					end_civil_wars = no
					end_wars = no
				}
				MAL = {
					country_event = {
						id = r56_eng.15
						days = 1
					}
				}
	
				if = {
					limit = {
						owns_state = 336
						controls_state = 336
					}
					MAL = {
						transfer_state = 336
					}
				}
	
				
				if = {
					limit = {
						owns_state = 1014 
						controls_state = 1014
					}
					MAL = {
						transfer_state = 1014
					}
				}
				
			}
	
			if = {
				limit = {
					is_ally_with = BHU
				}
				set_autonomy = {
					target = BHU
					autonomy_state = autonomy_free
					end_civil_wars = no
					end_wars = no
				}
				BHU = {
					country_event = {
						id = r56_eng.15
						days = 1
					}
				}
	
				
			}
	
			
			if = {
				limit = {
					is_ally_with = OMA
				}
				set_autonomy = {
					target = OMA
					autonomy_state = autonomy_free
					end_civil_wars = no
					end_wars = no
				}
				OMA = {
					country_event = {
						id = r56_eng.15
						days = 1
					}
				}
	
				
			}
	
			if = {
				limit = {
					is_ally_with = EGY
				}
				set_autonomy = {
					target = EGY
					autonomy_state = autonomy_free
					end_civil_wars = no
					end_wars = no
				}
				EGY = {
					country_event = {
						id = r56_eng.15
						days = 1
					}
				}
	
				if = {
					limit = {
						owns_state = 911
						controls_state = 911
					}
					EGY = {
						transfer_state = 911
					}
				}
	
				
				if = {
					limit = {
						owns_state = 995
						controls_state = 995
					}
					EGY = {
						transfer_state = 995
					}
				}
				
			}
	
			if = {
				limit = {
					is_ally_with = MPL
				}
				if = {
					limit = {
						MPL = {
							OR = {
								has_completed_focus = MPL_two_people_union
								has_cosmetic_tag = MPL_Jerusalem
							}
						}
					}
					
					set_autonomy = {
						target = MPL
						autonomy_state = autonomy_free
						end_civil_wars = no
						end_wars = no
					}
				}
				else = {
					MPL = {
						country_event = mandate_palestine.501
					}
				}
			}
	
			326 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					transfer_state_to = 593.controller
				}
			}
	
			
			659 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					transfer_state_to = 293.controller
				}
			}
	
			
			906 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					transfer_state_to = 293.controller
				}
			}
	
			
			858 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					transfer_state_to = 859.controller
				}
			}
	
			
			765 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					transfer_state_to = 859.controller
				}
			}
			
			658 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					transfer_state_to = 859.controller
				}
			}
			
			1007 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					if = { 
						limit = {
							PER = {
								any_controlled_state = {
									is_coastal = yes
								}
							}
						}
						transfer_state_to = PER
					}
					else = {
						transfer_state_to = 859.controller
					}
				}
			}
	

			119 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					transfer_state_to = 134.controller
				}
			}
			
			656 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					transfer_state_to = 1045.controller
				}
			}
	
			release_on_controlled = SMA
			release_on_controlled = KEN
			release_on_controlled = UGA
			release_on_controlled = TZN
			if = {
				limit = {
					controls_state = 1055
					owns_state = 1055
				}
				1055 = {
					transfer_state_to = 546.controller
				}
			}
			release_on_controlled = MLW
			release_on_controlled = ZAM
			release_on_controlled = NGA
			release_on_controlled = GHA
			release_on_controlled = SIE
			release_on_controlled = GAM
			release_on_controlled = JOR
			
			release_puppet_on_controlled = CYP
			release_puppet_on_controlled = MLT
			if = {
				limit = {
					any_controlled_state = {
						is_core_of = SCO
						NOT = {
							state = 970
						}
					}
				}
				release_on_controlled = SCO
				SCO = {
					add_ideas = YUG_neutral_foreign_policy
				}
			}
	
	
			every_subject_country = {
				random_country = {
					limit = {
						has_idea = ENG_exiled_royal_family
						NOT = {
							original_tag = MPL
						}
					}
					set_autonomy = {
						target = PREV
						autonomy_state = autonomy_protectorate
						end_civil_wars = no
						end_wars = no
					}
				}
			}
	
			leave_faction = yes
		}

		
	}

	option = {
		name = r56_eng.11.b
		126 = {
			controller = {
				
				news_event = {
					id = r56_eng.18
					days = 2
					random_hours = 12
				}
			}
		}
		custom_effect_tooltip = ENG_collapse_of_the_empire_tt
		
		hidden_effect = {
			create_country_leader = {
				name = "Fallen Government"
				picture = "portrait_eng_fallen_government.dds"
				expire = "1965.1.1"
				ideology = conservatism
				traits = {
					cabinet_crisis
				}
			}
			if = {
				limit = {
					is_ally_with = CAN
				}
				transfer_units_fraction = {
					target = CAN
					size = 0.5
					navy_ratio = 0.6
					air_ratio = 0.7
					army_ratio = 0.4
					stockpile_ratio = 0.4
				}
				set_autonomy = {
					target = CAN
					autonomy_state = autonomy_free
				}
				if = {
					limit = {
						NOT = {
							any_other_country = {
								has_idea = ENG_exiled_royal_family
							}
						}
						CAN = {
							has_capitulated = no
						}
					}
					CAN = {
						add_ideas = ENG_exiled_royal_family
						save_global_event_target_as = ENG_commonwealth_successor
						country_event = {
							id = r56_eng.12
							days = 1
						}
						if = {
							limit = {
								ENG = {
									is_faction_leader = yes
								}
							}
							set_faction_leader = yes
						}
						change_tag_from = ENG
					}
				}
				if = {
					limit = {
						owns_state = 118
						controls_state = 118
					}
					CAN  = {
						transfer_state = 118
					}
					
				}
	
				if = {
					limit = {
						owns_state = 332
						controls_state = 332
					}
					CAN = {
						transfer_state = 332
					}
				}
	
				if = {
					limit = {
						owns_state = 332
						controls_state = 332
					}
					CAN = {
						transfer_state = 332
					}
				}
				if = {
					limit = {
						owns_state = 331
						controls_state = 331
					}
					CAN = {
						transfer_state = 331
					}
				}
				if = {
					limit = {
						owns_state = 331
						controls_state = 331
					}
					CAN = {
						transfer_state = 331
					}
				}
				if = {
					limit = {
						owns_state = 696
						controls_state = 696
					}
					CAN = {
						transfer_state = 696
					}
				}
				if = {
					limit = {
						owns_state = 689
						controls_state = 689
					}
					CAN = {
						transfer_state = 689
					}
				}
				if = {
					limit = {
						owns_state = 311
						controls_state = 311
					}
					CAN = {
						transfer_state = 311
					}
				}
				if = {
					limit = {
						owns_state = 690
						controls_state = 690
					}
					CAN = {
						transfer_state = 690
					}
				}
				if = {
					limit = {
						owns_state = 693
						controls_state = 693
					}
					CAN = {
						transfer_state = 693
					}
				}
				if = {
					limit = {
						owns_state = 1081
						controls_state = 1081
					}
					CAN = {
						transfer_state = 1081
					}
				}
				if = {
					limit = {
						owns_state = 308
						controls_state = 308
					}
					CAN = {
						transfer_state = 308
					}
				}
				if = {
					limit = {
						owns_state = 1082
						controls_state = 1082
					}
					CAN = {
						transfer_state = 1082
					}
				}
				if = {
					limit = {
						owns_state = 1083
						controls_state = 1083
					}
					CAN = {
						transfer_state = 1083
					}
				}
				if = {
					limit = {
						owns_state = 1084
						controls_state = 1084
					}
					CAN = {
						transfer_state = 1084
					}
				}
				if = {
					limit = {
						owns_state = 692
						controls_state = 692
					}
					CAN = {
						transfer_state = 692
					}
				}
				if = {
					limit = {
						owns_state = 1085
						controls_state = 1085
					}
					CAN = {
						transfer_state = 1085
					}
				}
				if = {
					limit = {
						owns_state = 691
						controls_state = 691
					}
					CAN = {
						transfer_state = 691
					}
				}
				if = {
					limit = {
						owns_state = 687
						controls_state = 687
					}
					CAN = {
						transfer_state = 687
					}
				}
				
				if = {
					limit = {
						owns_state = 703
						controls_state = 703
					}
					CAN = {
						transfer_state = 703
					}
				}
				
				if = {
					limit = {
						owns_state = 704
						controls_state = 704
					}
					CAN = {
						transfer_state = 704
					}
				}
				
				if = {
					limit = {
						owns_state = 299
						controls_state = 299
					}
					CAN = {
						transfer_state = 299
					}
	
					ARG = {
						country_event = {
							id = r56_eng.16
							days = 10
						}
					}
				}
	
				
				if = {
					limit = {
						owns_state = 720
						controls_state = 720
					}
					CAN = {
						transfer_state = 720
					}
				}
				
				
	
			}
	
			if = {
				limit = {
					is_ally_with = AST
				}
				transfer_units_fraction = {
					target = AST
					size = 0.3
					navy_ratio = 0.4
					air_ratio = 0.3
					army_ratio = 0.2
					stockpile_ratio = 0.25
				}
				set_autonomy = {
					target = AST
					autonomy_state = autonomy_free
					end_civil_wars = no
					end_wars = no
				}
				if = {
					limit = {
						NOT = {
							any_other_country = {
								has_idea = ENG_exiled_royal_family
							}
						}
						AST = {
							has_capitulated = no
						}
					}
					AST = {
						add_ideas = ENG_exiled_royal_family
						save_global_event_target_as = ENG_commonwealth_successor
						country_event = {
							id = r56_eng.12
							days = 1
						}
						if = {
							limit = {
								ENG = {
									is_faction_leader = yes
								}
							}
							set_faction_leader = yes
						}
						change_tag_from = ENG
					}
					leave_faction = yes
				}
				else = {
					AST = {
						country_event = {
							id = r56_eng.13
							days = 1
						}
					}
				}
	
				if = {
					limit = {
						owns_state = 634
						controls_state = 634
					}
					AST = {
						transfer_state = 634
					}
				}
	
				
				if = {
					limit = {
						owns_state = 639
						controls_state = 639
					}
					AST = {
						transfer_state = 639
					}
				}
	
				
				if = {
					limit = {
						owns_state = 711
						controls_state = 711
					}
					AST = {
						transfer_state = 711
					}
				}
	
				
				if = {
					limit = {
						owns_state = 712
						controls_state = 712
					}
					AST = {
						transfer_state = 712
					}
				}
	
				
				if = {
					limit = {
						owns_state = 709
						controls_state = 709
					}
					AST = {
						transfer_state = 709
					}
				}
				
				if = {
					limit = {
						owns_state = 707
						controls_state = 707
					}
					AST = {
						transfer_state = 707
					}
				}
	
				
				if = {
					limit = {
						owns_state = 710
						controls_state = 710
					}
					AST = {
						transfer_state = 710
					}
				}
			}
	
			if = {
				limit = {
					is_ally_with = SAF
				}
				set_autonomy = {
					target = SAF
					autonomy_state = autonomy_free
					end_civil_wars = no
					end_wars = no
				}
				if = {
					limit = {
						NOT = {
							any_other_country = {
								has_idea = ENG_exiled_royal_family
							}
						}
						SAF = {
							has_capitulated = no
						}
					}
					SAF = {
						add_ideas = ENG_exiled_royal_family
						save_global_event_target_as = ENG_commonwealth_successor
						country_event = {
							id = r56_eng.12
							days = 1
						}
						if = {
							limit = {
								ENG = {
									is_faction_leader = yes
								}
							}
							set_faction_leader = yes
						}
						change_tag_from = ENG
					}
					leave_faction = yes
				}
				else = {
					SAF = {
						country_event = {
							id = r56_eng.13
							days = 1
						}
					}
				}
	
				if = {
					limit = {
						owns_state = 938
						controls_state = 938
					}
					SAF = {
						transfer_state = 938
					}
				}
	
				if = {
					limit = {
						owns_state = 939
						controls_state = 939
					}
					SAF = {
						transfer_state = 939
					}
				}
	
				if = {
					limit = {
						owns_state = 542
						controls_state = 542
					}
					SAF = {
						transfer_state = 542
					}
				}
	
				if = {
					limit = {
						owns_state = 545
						controls_state = 545
					}
					SAF = {
						transfer_state = 545
					}
				}
			}
	
			if = {
				limit = {
					is_ally_with = NZL
				}
				set_autonomy = {
					target = NZL
					autonomy_state = autonomy_free
					end_civil_wars = no
					end_wars = no
				}
				if = {
					limit = {
						NOT = {
							any_other_country = {
								has_idea = ENG_exiled_royal_family
							}
						}
						NZL = {
							has_capitulated = no
						}
					}
					NZL = {
						add_ideas = ENG_exiled_royal_family
						save_global_event_target_as = ENG_commonwealth_successor
						country_event = {
							id = r56_eng.12
							days = 1
						}
						if = {
							limit = {
								ENG = {
									is_faction_leader = yes
								}
							}
							set_faction_leader = yes
						}
						change_tag_from = ENG
					}
					leave_faction = yes
				}
				else = {
					NZL = {
						country_event = {
							id = r56_eng.13
							days = 1
						}
					}
				}
	
				
				if = {
					limit = {
						owns_state = 734
						controls_state = 734
					}
					NZL = {
						transfer_state = 734
					}
				}
	
				if = {
					limit = {
						owns_state = 636
						controls_state = 636
					}
					NZL = {
						transfer_state = 636
					}
				}

				
				if = {
					limit = {
						owns_state = 270
						controls_state = 270
					}
					NZL = {
						transfer_state = 270
					}
				}
				
				if = {
					limit = {
						owns_state = 643
						controls_state = 643
					}
					NZL = {
						transfer_state = 643
					}
				}
				
				if = {
					limit = {
						owns_state = 643
						controls_state = 643
					}
					NZL = {
						transfer_state = 643
					}
				}
				
				if = {
					limit = {
						owns_state = 727
						controls_state = 727
					}
					NZL = {
						transfer_state = 727
					}
				}
				
				if = {
					limit = {
						owns_state = 720
						controls_state = 720
					}
					NZL = {
						transfer_state = 720
					}
				}
				
				if = {
					limit = {
						owns_state = 727
						controls_state = 727
					}
					NZL = {
						transfer_state = 727
					}
				}
				
			}
	
	
			if = {
				limit = {
					is_ally_with = RAJ
				}
				set_autonomy = {
					target = RAJ
					autonomy_state = autonomy_free
					end_civil_wars = no
					end_wars = no
				}
				RAJ = {
					country_event = {
						id = r56_eng.14
						days = 1
					}
				}
	
				if = {
					limit = {
						owns_state = 281
						controls_state = 281
					}
					RAJ = {
						transfer_state = 281
					}
				}
	
				
				if = {
					limit = {
						owns_state = 422
						controls_state = 422
					}
					RAJ = {
						transfer_state = 422
					}
				}
				
				
				
			}
	
			if = {
				limit = {
					is_ally_with = MAL
				}
				set_autonomy = {
					target = MAL
					autonomy_state = autonomy_free
					end_civil_wars = no
					end_wars = no
				}
				MAL = {
					country_event = {
						id = r56_eng.15
						days = 1
					}
				}
	
				if = {
					limit = {
						owns_state = 336
						controls_state = 336
					}
					MAL = {
						transfer_state = 336
					}
				}
	
				
				if = {
					limit = {
						owns_state = 1014
						controls_state = 1014
					}
					MAL = {
						transfer_state = 1014
					}
				}
				
			}
	
			if = {
				limit = {
					is_ally_with = BHU
				}
				set_autonomy = {
					target = BHU
					autonomy_state = autonomy_free
					end_civil_wars = no
					end_wars = no
				}
				BHU = {
					country_event = {
						id = r56_eng.15
						days = 1
					}
				}
	
				
			}
	


			
			if = {
				limit = {
					is_ally_with = OMA
				}
				set_autonomy = {
					target = OMA
					autonomy_state = autonomy_free
					end_civil_wars = no
					end_wars = no
				}
				OMA = {
					country_event = {
						id = r56_eng.15
						days = 1
					}
				}
	
				
			}
	
			if = {
				limit = {
					is_ally_with = EGY
				}
				set_autonomy = {
					target = EGY
					autonomy_state = autonomy_free
					end_civil_wars = no
					end_wars = no
				}
				EGY = {
					country_event = {
						id = r56_eng.15
						days = 1
					}
				}
	
				if = {
					limit = {
						owns_state = 911
						controls_state = 911
					}
					EGY = {
						transfer_state = 911
					}
				}
	
				
				if = {
					limit = {
						owns_state = 995
						controls_state = 995
					}
					EGY = {
						transfer_state = 995
					}
				}
				
			}
	
			if = {
				limit = {
					is_ally_with = MPL
				}
				if = {
					limit = {
						MPL = {
							OR = {
								has_completed_focus = MPL_two_people_union
								has_cosmetic_tag = MPL_Jerusalem
							}
						}
					}
					
					set_autonomy = {
						target = MPL
						autonomy_state = autonomy_free
						end_civil_wars = no
						end_wars = no
					}
				}
				else = {
					MPL = {
						country_event = mandate_palestine.501
					}
				}
			}
	
			326 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					transfer_state_to = 593.controller
				}
			}
	
			
			659 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					transfer_state_to = 293.controller
				}
			}
	
			
			906 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					transfer_state_to = 293.controller
				}
			}
	
			
			858 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					transfer_state_to = 859.controller
				}
			}
	
			
			765 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					transfer_state_to = 859.controller
				}
			}
			
			658 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					transfer_state_to = 859.controller
				}
			}
			
			1007 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					if = { 
						limit = {
							PER = {
								any_controlled_state = {
									is_coastal = yes
								}
							}
						}
						transfer_state_to = PER
					}
					else = {
						transfer_state_to = 859.controller
					}
				}
			}
	
			119 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					transfer_state_to = 134.controller
				}
			}

			656 = {
				if = {
					limit = {
						is_owned_by = ENG
						is_controlled_by = ENG
					}
					transfer_state_to = 1045.controller
				}
			}
	
			release_on_controlled = SMA
			release_on_controlled = KEN
			release_on_controlled = UGA
			release_on_controlled = TZN
			if = {
				limit = {
					controls_state = 1055
					owns_state = 1055
				}
				1055 = {
					transfer_state_to = 546.controller
				}
			}
			release_on_controlled = MLW
			release_on_controlled = ZAM
			release_on_controlled = NGA
			release_on_controlled = GHA
			release_on_controlled = SIE
			release_on_controlled = GAM
			release_on_controlled = JOR
			
			
			release_puppet_on_controlled = CYP
			release_puppet_on_controlled = MLT
			if = {
				limit = {
					any_controlled_state = {
						is_core_of = SCO
						NOT = {
							state = 970
						}
					}
				}
				release_on_controlled = SCO
				SCO = {
					add_ideas = YUG_neutral_foreign_policy
				}
			}
	
	
			every_subject_country = {
				random_country = {
					limit = {
						has_idea = ENG_exiled_royal_family
						NOT = {
							original_tag = MPL
						}
					}
					set_autonomy = {
						target = PREV
						autonomy_state = autonomy_protectorate
						end_civil_wars = no
						end_wars = no
					}
				}
			}
	
	
			leave_faction = yes
	
			
		}
	}

	option = {
		name = r56_eng.11.c
		ai_chance = {
			base = 0
		}
	}
}

country_event = {
	id = r56_eng.12
	title = r56_eng.12.t
	desc = r56_eng.12.d
	picture = GFX_report_event_MPL_british_departure
	is_triggered_only = yes
	option = {
		name = r56_eng.12.a
		effect_tooltip = {
			FROM = { set_autonomy = { target = ROOT autonomy_state = autonomy_free } }
		}
		effect_tooltip = {
			add_ideas = ENG_exiled_royal_family
			if = {
				limit = {
					is_faction_leader = yes
				}
				set_faction_leader = yes
			}
		}
		custom_effect_tooltip = ENG_got_territories_from_collapse
		ai_chance = {
			base = 100
			modifier = {
				add = -50
				NOT = {
					911 = {
						controller = {
							OR = {
								original_tag = ROOT
								is_ally_with = ROOT
							}

						}
					}
				}
			}
			modifier = {
				add = -30
				NOT = {
					118 = {
						controller = {
							OR = {
								original_tag = ROOT
								is_ally_with = ROOT
							}

						}
					}
				}
			}
			modifier = {
				add = -20
				126 = {
					controller = {
						faction_leader = {
							NOT = {
								any_enemy_country = {
									is_major = yes
									NOT = {
										original_tag = ROOT
										is_ally_with = ROOT
									}
								}
							}
						}
					}
				}
			}
			
		}
	}

	option = {
		name = r56_eng.12.b
		trigger = {
			is_faction_leader = yes
		}
		
		effect_tooltip = {
			add_ideas = ENG_exiled_royal_family
			
			if = {
				limit = {
					is_faction_leader = yes
				}
				set_faction_leader = yes
			}
		}
		custom_effect_tooltip = ENG_got_territories_from_collapse

		126 = {
			controller = {
				faction_leader = {
					white_peace = ROOT
				}
			}
		}

		ai_chance = {
			base = 0
			modifier = {
				add = 50
				NOT = {
					911 = {
						controller = {
							OR = {
								original_tag = ROOT
								is_ally_with = ROOT
							}

						}
					}
				}
			}
			modifier = {
				add = 30
				NOT = {
					118 = {
						controller = {
							OR = {
								original_tag = ROOT
								is_ally_with = ROOT
							}

						}
					}
				}
			}
			modifier = {
				add = 20
				126 = {
					controller = {
						faction_leader = {
							NOT = {
								any_enemy_country = {
									is_major = yes
									NOT = {
										original_tag = ROOT
										is_ally_with = ROOT
									}
								}
							}
						}
					}
				}
			}
			
		}

	}
}


country_event = {
	id = r56_eng.13
	title = r56_eng.13.t
	desc = r56_eng.13.d
	picture = GFX_report_event_MPL_british_departure
	is_triggered_only = yes
	option = {
		name = r56_eng.13.a
		effect_tooltip = {
			FROM = { set_autonomy = { target = ROOT autonomy_state = autonomy_free } }
		}
		custom_effect_tooltip = ENG_got_territories_from_collapse
		
	}
}


country_event = {
	id = r56_eng.14
	title = r56_eng.14.t
	desc = r56_eng.14.d
	picture = GFX_report_event_MPL_british_departure
	is_triggered_only = yes
	option = {
		name = r56_eng.14.a
		effect_tooltip = {
			FROM = { set_autonomy = { target = ROOT autonomy_state = autonomy_free } }
		}
		custom_effect_tooltip = ENG_got_territories_from_collapse
		if = {
			limit = {
				OR = {
					has_country_leader = {
						character = RAJ_lord_linlithgow
						ruling_only = yes
					}
					has_country_leader = {
						character = RAJ_lord_willingdon
						ruling_only = yes
					}
				}
				
				
			}
			retire_country_leader = yes
			
		}
	}
	option = {
		name = r56_eng.14.b
		trigger = {
			surrender_progress < 0.01
		}
		effect_tooltip = {
			FROM = { set_autonomy = { target = ROOT autonomy_state = autonomy_free } }
		}
		custom_effect_tooltip = ENG_got_territories_from_collapse
		if = {
			limit = {
				OR = {
					has_country_leader = {
						character = RAJ_lord_linlithgow
						ruling_only = yes
					}
					has_country_leader = {
						character = RAJ_lord_willingdon
						ruling_only = yes
					}
				}
				
				
			}
			add_popularity = {
				ideology = democratic
				popularity = 0.4
			}
			set_politics = {
				ruling_party = democratic
				elections_allowed = yes
			}
			
		}
		leave_faction = yes
		126 = {
			controller = {
				faction_leader = {
					white_peace = ROOT
				}
			}
		}
	}
}


country_event = {
	id = r56_eng.15
	title = r56_eng.15.t
	desc = r56_eng.15.d
	picture = GFX_report_event_MPL_british_departure
	is_triggered_only = yes
	option = {
		name = r56_eng.15.a
		effect_tooltip = {
			FROM = { set_autonomy = { target = ROOT autonomy_state = autonomy_free } }
		}
		custom_effect_tooltip = ENG_got_territories_from_collapse
		
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				NOT = {
					original_tag = EGY
				}
				OR = {
					has_war_with = CHI
					has_war_with = JAP
				}
			}
			
		}
	}
	option = {
		name = r56_eng.15.b
		trigger = {
			surrender_progress < 0.01
		}
		effect_tooltip = {
			FROM = { set_autonomy = { target = ROOT autonomy_state = autonomy_free } }
		}
		custom_effect_tooltip = ENG_got_territories_from_collapse
		
		leave_faction = yes
		126 = {
			controller = {
				faction_leader = {
					white_peace = ROOT
				}
			}
		}
		ai_chance = {
			base = 1
			modifier = {
				add = -1
				NOT = {
					original_tag = EGY
				}
				OR = {
					has_war_with = CHI
					has_war_with = JAP
				}
			}
			
		}
	}
}

country_event = {
	id = r56_eng.16
	title = r56_eng.16.t
	desc = r56_eng.16.d
	picture = GFX_report_event_MPL_british_departure
	is_triggered_only = yes
	trigger = {
		is_subject = no
		any_controlled_state = {
			is_coastal = yes
		}
	}
	option = {
		name = r56_eng.16.a
		transfer_state = 299
		if = {
			limit = {
				720 = {
					is_controlled_by = CAN
				}
			}
			transfer_state = 720
		}
		add_war_support = 0.05
		custom_effect_tooltip = raj_may_lead_to_war
		CAN = {
			country_event = {
				id = r56_eng.17
				days = 1
				random_hours = 12
			}
		}
	}
	option = {
		name = r56_eng.16.b
		ai_chance = {
			base = 0
		}
	}
}

country_event = {
	id = r56_eng.17
	title = r56_eng.17.t
	desc = r56_eng.17.d
	picture = GFX_report_event_MPL_british_departure
	is_triggered_only = yes
	option = {
		name = r56_eng.17.a
		create_wargoal = {
			target = ARG
			type = take_state
			generator = { 299 720 }
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				has_war_with_major = no
			}
		}
	}
	option = {
		name = r56_eng.17.b
		ai_chance = {
			base = 1
			modifier = {
				add = -1
				has_war_with_major = no
			}
		}
	}
}

news_event = {
	id = r56_eng.18
	title = r56_eng.18.t
	desc = r56_eng.18.d
	picture = GFX_news_event_eng_decolonization
	is_triggered_only = yes
	major = yes
	option = {
		name = r56_eng.18.a
	}
}