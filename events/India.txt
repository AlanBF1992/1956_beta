###########################
# Indian Events
###########################

add_namespace = india

country_event = {#ADEN HANDOVER
    id = india.100
	title = india.1.t
	desc = india.1.desc
    fire_only_once = yes

    is_triggered_only = yes

    option = {
        name = india.1.a
     }
}
country_event = {#ADEN HANDOVER
    id = india.118
	title = india.118.t
	desc = india.118.desc
    fire_only_once = yes

    is_triggered_only = yes

    option = {
        name = india.118.a
		set_variable = {
			exvar = num_days 
		}
		add_political_power = var:exvar
     }
}

### E L E C T I O N  E V E N T S ###

country_event = {#Election Notification
    id = india.1
	title = india.intro.t
	desc = india.intro.desc
    fire_only_once = yes
	picture = GFX_report_event_picture_RAJ_Indian_National_Congress
    is_triggered_only = yes

	trigger = {
		#Didnt choose Underground Activity
	}
	
    option = {#Let them play in their Ballpit
        name = india.intro.c
		trigger = {
			NOT = {
				focus_progress = {
					focus = RAJ_Reinforce_the_Government_of_India_Act
					progress > 0
				}
			}
		}
		set_country_flag = chose_underground
    }
    option = {#Let them play in their Ballpit
        name = india.intro.a
		trigger = {
			NOT = {
				focus_progress = {
					focus = RAJ_Provincial_Elections
					progress > 0
				}
				focus_progress = {
					focus = RAJ_Underground_Activity
					progress > 0
				}
			}
		}
		set_country_flag = chose_raj
    }
    option = {#We shall build a greater India together
        name = india.intro.b
		country_event = {
			id = india.2
			days = 17
		}
		hidden_effect = {
			set_party_name = {
				ideology = communism
				name = "ILP"
				long_name = "Independent Labour Party"
			}
		}
		trigger = {
			NOT = {
				focus_progress = {
					focus = RAJ_Linlithgows_Reign
					progress > 0
				}
				focus_progress = {
					focus = RAJ_Underground_Activity
					progress > 0
				}
			}
		}
		set_country_flag = chose_ind
    }
}

country_event = {#PROVINCIAL ELECTIONS
    id = india.2
	title = india.2.t
	desc = india.2.desc
    fire_only_once = yes
	picture = GFX_report_event_picture_RAJ_generic_election
    is_triggered_only = yes
	immediate = {
		hidden_effect = {
			set_country_flag = election_enabled
			set_variable = {
				var = inc_control
				value = 0
			}
			set_variable = {
				var = upa_control
				value = 0
			}
			set_variable = {
				var = ifb_control
				value = 0
			}
			set_variable = {
				var = neutral_control
				value = 0
			}
			set_variable = {
				var = mission_timeout_election
				value = 500
			}
			subtract_from_variable = {
				mission_timeout_election = num_days
			}
			every_owned_state = {
				limit = {
					is_core_of = RAJ
					NOT = {
						has_state_flag = princely_state
						state = 424
						state = 431
						state = 445
					}
				}
				set_variable = {	#Influence range from 0-5
					var = inc
					value = 1
				}
				set_variable = {
					var = upa
					value = 1
				}
				set_variable = {
					var = ifb
					value = 1
				}
				set_variable = {
					var = neutral
					value = 2
				}
			}
			443 = {
				set_variable = {
					var = neutral
					value = 4
				}
				set_variable = {
					var = inc
					value = 1
				}
			}
			440 = {
				set_variable = {
					var = upa
					value = 3
				}
			}
			raj_calculate_election = yes
			country_event = { 
				id = india.3
				days = 2
			}
		}
	}
    option = {
        name = india.2.a
		custom_effect_tooltip = raj_election_start
		effect_tooltip = { complete_national_focus = RAJ_Indian_National_Congress }
		set_country_flag = inc_support
    }
    option = {
        name = india.2.b
		custom_effect_tooltip = raj_election_start
		effect_tooltip = { complete_national_focus = RAJ_Unionist_Party }
		set_country_flag = upa_support
    }
    option = {
        name = india.2.c
		custom_effect_tooltip = raj_election_start
		effect_tooltip = { complete_national_focus = RAJ_Independent_Labour_Party }
		set_country_flag = ifb_support
    }
}
country_event = {#ELECTION ENEMY ACTION
    id = india.3
	hidden = no
    is_triggered_only = yes
	immediate = {
		if = { 
			limit = {
				tag = RAJ
				has_country_flag = election_enabled
			}
			random_owned_state = {
				limit = { 
					NOT = {
						has_state_flag = princely_state
						state = 424
						state = 431
						state = 445
					}
					is_owned_by = RAJ
					is_core_of = RAJ
				}
				RAJ = { set_variable = { enemy_campaign_state = PREV.id } }
				set_state_flag = raj_enemy_op 
				set_state_flag = enemy_campaign_running
			}
			if = {
				limit = {
					has_country_flag = INC_support
				}
				random_list = {
					50 = {#UP Action
						RAJ = { 
							set_country_flag = upa_operation
							activate_mission = upa_enemy_operation
						}
					}	
					50 = {#IFB Action
						RAJ = {
							set_country_flag = ifb_operation
							activate_mission = ifb_enemy_operation
						}
					}
				}
			}
			if = {
				limit = {
					has_country_flag = UPA_support
				}
				random_list = {
					50 = {#INC Action
						RAJ = { 
							set_country_flag = inc_operation
							activate_mission = inc_enemy_operation
						}
					}	
					50 = {#IFB Action
						RAJ = { 
							set_country_flag = ifb_operation
							activate_mission = ifb_enemy_operation
						}
					}
				}
			}
			if = {
				limit = {
					has_country_flag = IFB_support
				}
				random_list = {
					50 = {#INC Action
						RAJ = { 
							set_country_flag = inc_operation
							activate_mission = inc_enemy_operation
						}
					}	
					50 = {#UPA Action
						RAJ = {
							set_country_flag = upa_operation
							activate_mission = upa_enemy_operation
						}
					}
				}
			}
		}
	}
}
country_event = {#ELECTION RESULTS
    id = india.4
	title = india.4.t
	desc = india.4.desc
    fire_only_once = yes

    is_triggered_only = yes

    option = {	#INC Win
        name = india.4.a
		trigger = {
			NOT = {
				check_variable = {
					inc_control < upa_control
				}
				check_variable = {
					inc_control < ifb_control
				}
			}
			if = {
				limit = {
					has_country_flag = upa_support
				}
				check_variable = {
					upa_control < inc_control
				}
				check_variable = {
					upa_control < ifb_control
				}
			}	
			if = {
				limit = {
					has_country_flag = ifb_support
				}
				check_variable = {
					ifb_control < upa_control
				}
				check_variable = {
					ifb_control < inc_control
				}
			}	
		}
		set_country_flag = INC_victory
		if = {
			NOT = {
				has_country_flag = inc_support
			}
			raj_lost_election_consequences = yes
		}
		raj_calculate_popularity_post_election = yes
	}
    option = {	#UP Win
        name = india.4.b
		trigger = {
			NOT = {
				check_variable = {
					upa_control < inc_control
				}
				check_variable = {
					upa_control < ifb_control
				}
			}
			if = {
				limit = {
					has_country_flag = inc_support
				}
				check_variable = {
					inc_control < upa_control
				}
				check_variable = {
					inc_control < ifb_control
				}
			}	
			if = {
				limit = {
					has_country_flag = ifb_support
				}
				check_variable = {
					ifb_control < upa_control
				}
				check_variable = {
					ifb_control < inc_control
				}
			}	
		}
		
		set_country_flag = UP_victory
		if = {
			NOT = {
				has_country_flag = upa_support
			}
			raj_lost_election_consequences = yes
		}
		raj_calculate_popularity_post_election = yes
	}
    option = {	#ILP Win
        name = india.4.c
		trigger = {
			NOT = {
				check_variable = {
					ifb_control < upa_control
				}
				check_variable = {
					ifb_control < inc_control
				}
			}
			NOT = {
				check_variable = {
					upa_control < inc_control
				}
				check_variable = {
					upa_control < ifb_control
				}
			}
			if = {
				limit = {
					has_country_flag = inc_support
				}
				check_variable = {
					inc_control < upa_control
				}
				check_variable = {
					inc_control < ifb_control
				}
			}	
			if = {
				limit = {
					has_country_flag = upa_support
				}
				check_variable = {
					upa_control < inc_control
				}
				check_variable = {
					upa_control < ifb_control
				}
			}
		}
		
		set_country_flag = ILP_victory
		if = {
			NOT = {
				has_country_flag = ifb_support
			}
			raj_lost_election_consequences = yes
		}
		raj_calculate_popularity_post_election = yes
	}
}
news_event = {
	id = india.5
	title = india.5.t
	desc = india.5.d
	picture = GFX_news_event_india_protests
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = india.5.a
		trigger = {
			OR = {
				AND = {
					TAG = ENG
					OR = {
						has_completed_focus = ENG_revisit_colonial_policy
						has_completed_focus = ENG_concessions_to_the_trade_unions
					}
				}
				has_government = democratic
			}
		}
	}
	option = {
		name = india.5.b
		trigger = { 
			TAG = ENG
			NOT = {
				OR = {
					has_completed_focus = ENG_revisit_colonial_policy
					has_completed_focus = ENG_concessions_to_the_trade_unions
				}
				has_government = communism
				has_government = democratic
			}
		}
	}
	option = {
		name = india.5.c
		trigger = { 
			has_government = communism
			RAJ = {
				has_country_flag = ILP_victory
			}
		}
	option = {
		name = india.5.e
		trigger = { 
			tag = RAJ
		}
	}
	option = {
		name = india.5.f
		trigger = { 
			NOT = {
				tag = RAJ
				has_government = communism
				RAJ = {
					has_country_flag = ILP_victory
				}
				TAG = ENG
				NOT = {
					OR = {
						has_completed_focus = ENG_revisit_colonial_policy
						has_completed_focus = ENG_concessions_to_the_trade_unions
					}
					has_government = communism
					has_government = democratic
				}
				OR = {
					AND = {
						TAG = ENG
						OR = {
							has_completed_focus = ENG_revisit_colonial_policy
							has_completed_focus = ENG_concessions_to_the_trade_unions
						}
					}
					has_government = democratic
				}
			}
		}
	}
}
country_event = {#INC moves to secure rural Hindus
    id = india.300
	title = india.300.t
	desc = india.300.desc
    fire_only_once = yes
	picture = GFX_report_event_picture_RAJ_Indian_National_Congress
    is_triggered_only = yes

    option = {
        name = india.300.a
		436 = {
			add_to_variable = {
				inc = 2
			}
			custom_effect_tooltip = raj_inc_2
		}
		438 = {
			add_to_variable = {
				inc = 2
			}
			custom_effect_tooltip = raj_inc_2
		}
		423 = {
			add_to_variable = {
				inc = 2
			}
			custom_effect_tooltip = raj_inc_2
		}
    }
    option = {	#Fight them
        name = india.300.b
		add_political_power = -150
		436 = {
			add_to_variable = {
				inc = 1
			}
			custom_effect_tooltip = raj_inc_1
		}
		438 = {
			add_to_variable = {
				inc = 1
			}
			custom_effect_tooltip = raj_inc_1
		}
		423 = {
			add_to_variable = {
				inc = 1
			}
			custom_effect_tooltip = raj_inc_1
		}
    }
}
country_event = {#Unionist Party secures industrial support
    id = india.301
	title = india.301.t
	desc = india.301.desc
    fire_only_once = yes
	picture = GFX_report_event_picture_RAJ_Provincial_Result
    is_triggered_only = yes

    option = {
        name = india.301.a
		111 = {
			add_to_variable = {
				upa = 2
			}
			custom_effect_tooltip = raj_upa_2
		}
		111 = {
			add_to_variable = {
				upa = 2
			}
			custom_effect_tooltip = raj_upa_2
		}
		111 = {
			add_to_variable = {
				upa = 2
			}
			custom_effect_tooltip = raj_upa_2
		}
    }
    option = {	#Privatise Industry
        name = india.301.b
		random_owned_state = {
			limit = {
				has_building = {
					industrial_complex > 0
				}
			}
			remove_building = {
				type = industrial_complex
				level = 1
			}
		}
		111 = {
			add_to_variable = {
				upa = 1
			}
			custom_effect_tooltip = raj_upa_1
		}
		111 = {
			add_to_variable = {
				upa = 1
			}
			custom_effect_tooltip = raj_upa_1
		}
		111 = {
			add_to_variable = {
				upa = 1
			}
			custom_effect_tooltip = raj_upa_1
		}
    }
}
country_event = {#Independent Labour Party secures international support
    id = india.302
	title = india.302.t
	desc = india.302.desc
    fire_only_once = yes
	picture = GFX_report_event_picture_RAJ_Government_Formation
    is_triggered_only = yes

    option = {
        name = india.302.a
		111 = {
			add_to_variable = {
				ifb = 2
			}
			custom_effect_tooltip = raj_ifb_2
		}
		111 = {
			add_to_variable = {
				ifb = 2
			}
			custom_effect_tooltip = raj_ifb_2
		}
		111 = {
			add_to_variable = {
				ifb = 2
			}
			custom_effect_tooltip = raj_ifb_2
		}
    }
    option = {	#Hinder them
        name = india.302.b
		every_country = {
			limit = {
				has_government = communism
				NOT = {
					has_war_with = SOV
				}	
				has_opinion = {
					target = RAJ
					value < 50
				}
			}
			add_opinion_modifier = {
				modifier = embargo
				target = RAJ
			}
		}
		111 = {
			add_to_variable = {
				ifb = 1
			}
			custom_effect_tooltip = raj_ifb_1
		}
		111 = {
			add_to_variable = {
				ifb = 1
			}
			custom_effect_tooltip = raj_ifb_1
		}
		111 = {
			add_to_variable = {
				ifb = 1
			}
			custom_effect_tooltip = raj_ifb_1
		}
    }
}

