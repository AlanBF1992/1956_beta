
########### Treaty influences mechanics ###############

######################### Egyptian Modifiers ############################
#Increase#
EGY_egyptian_treaty_influence_low_increase_effect = {
	custom_effect_tooltip = EGY_egypt_tt
	custom_effect_tooltip = EGY_treaty_influence_low_increase_tt
	add_to_variable = { var = EGY_egyptian_treaty_influence value = EGY_treaty_influence_low_increase }
	clamp_variable = {
		var = EGY_egyptian_treaty_influence
		min = 0
		max = 100
	}
}

EGY_egyptian_treaty_influence_medium_increase_effect = {
	custom_effect_tooltip = EGY_egypt_tt
	custom_effect_tooltip = EGY_treaty_influence_medium_increase_tt
	add_to_variable = { var = EGY_egyptian_treaty_influence value = EGY_treaty_influence_medium_increase }
	clamp_variable = {
		var = EGY_egyptian_treaty_influence
		min = 0
		max = 100
	}
}

EGY_egyptian_treaty_influence_high_increase_effect = {
	custom_effect_tooltip = EGY_egypt_tt
	custom_effect_tooltip = EGY_treaty_influence_high_increase_tt
	add_to_variable = { var = EGY_egyptian_treaty_influence value = EGY_treaty_influence_high_increase }
	clamp_variable = {
		var = EGY_egyptian_treaty_influence
		min = 0
		max = 100
	}
}

#Decrease#
EGY_egyptian_treaty_influence_low_decrease_effect = {
	custom_effect_tooltip = EGY_egypt_tt
	custom_effect_tooltip = EGY_treaty_influence_low_decrease_tt
	add_to_variable = { var = EGY_egyptian_treaty_influence = EGY_treaty_influence_low_decrease }
	clamp_variable = {
		var = EGY_egyptian_treaty_influence
		min = 0
		max = 100
	}
}

EGY_egyptian_treaty_influence_medium_decrease_effect = {
	custom_effect_tooltip = EGY_egypt_tt
	custom_effect_tooltip = EGY_treaty_influence_medium_decrease_tt
	add_to_variable = { var = EGY_egyptian_treaty_influence = EGY_treaty_influence_medium_decrease }
	clamp_variable = {
		var = EGY_egyptian_treaty_influence
		min = 0
		max = 100
	}
}

EGY_egyptian_treaty_influence_high_decrease_effect = {
	custom_effect_tooltip = EGY_egypt_tt
	custom_effect_tooltip = EGY_treaty_influence_high_decrease_tt
	add_to_variable = { var = EGY_egyptian_treaty_influence = EGY_treaty_influence_high_decrease }
	clamp_variable = {
		var = EGY_egyptian_treaty_influence
		min = 0
		max = 100
	}
}


######################### British Modifiers ###########################
#Increase#																			
EGY_british_treaty_influence_low_increase_effect = {
	custom_effect_tooltip = EGY_britain_tt
	custom_effect_tooltip = EGY_treaty_influence_low_increase_tt
	add_to_variable = { var = EGY_british_treaty_influence value = EGY_treaty_influence_low_increase }
	clamp_variable = {
		var = EGY_british_treaty_influence
		min = 0
		max = 100
	}
}

EGY_british_treaty_influence_medium_increase_effect = {
	custom_effect_tooltip = EGY_britain_tt
	custom_effect_tooltip = EGY_treaty_influence_medium_increase_tt
	add_to_variable = { var = EGY_british_treaty_influence value = EGY_treaty_influence_medium_increase }
	clamp_variable = {
		var = EGY_british_treaty_influence
		min = 0
		max = 100
	}
}

EGY_british_treaty_influence_high_increase_effect = {
	custom_effect_tooltip = EGY_britain_tt
	custom_effect_tooltip = EGY_treaty_influence_high_increase_tt
	add_to_variable = { var = EGY_british_treaty_influence value = EGY_treaty_influence_high_increase }
	clamp_variable = {
		var = EGY_british_treaty_influence
		min = 0
		max = 100
	}
}


EGY_lower_sudanese_serparatists = {
	if = {
		limit = {
			THIS = {
				has_dynamic_modifier = { modifier = EGY_moderate_sudanese_separatism }
			}
		}
		custom_effect_tooltip = EGY_lower_sudanese_separatism_tt
		hidden_effect = {
			THIS = {
				remove_dynamic_modifier = { modifier = EGY_moderate_sudanese_separatism } 
				add_dynamic_modifier = { modifier = EGY_mild_sudanese_separatism }
			}
		}
	}
	if = {
		limit = {
			THIS = {
				has_dynamic_modifier = { modifier = EGY_fierce_sudanese_separatism }
			}
		}
		custom_effect_tooltip =  EGY_lower_sudanese_separatism_tt
		hidden_effect = { 
			THIS = {
				remove_dynamic_modifier = { modifier = EGY_fierce_sudanese_separatism } 
				add_dynamic_modifier = { modifier = EGY_moderate_sudanese_separatism }
			}
		}
	}
}

EGY_raise_sudanese_serparatists = {
	if = {
		limit = {
			THIS = {
				has_dynamic_modifier = { modifier = EGY_moderate_sudanese_separatism }
			}
		}
		custom_effect_tooltip = EGY_raise_sudanese_separatism_tt
		hidden_effect = { 
			THIS = { 
				remove_dynamic_modifier = { modifier = EGY_moderate_sudanese_separatism } 
				add_dynamic_modifier = { modifier = EGY_fierce_sudanese_separatism }
			}
		}
	}
	if = {
		limit = {
			THIS = {
				has_dynamic_modifier = { modifier = EGY_mild_sudanese_separatism }
			}
		}
		custom_effect_tooltip = EGY_raise_sudanese_separatism_tt
		hidden_effect = { 
			THIS = {
				remove_dynamic_modifier = { modifier = EGY_mild_sudanese_separatism } 
				add_dynamic_modifier = { modifier = EGY_moderate_sudanese_separatism }
			}
		}
	}
}

EGY_remove_sudanese_separatism = {
	clr_state_flag = EGY_sudanese_separatism_flag
	if = {
		limit = {
			THIS = {
				has_dynamic_modifier = { modifier = EGY_fierce_sudanese_separatism }
			}
		}
		custom_effect_tooltip = EGY_remove_sudanese_separatism_tt
		hidden_effect = { 
			THIS = { 
				remove_dynamic_modifier = { modifier = EGY_fierce_sudanese_separatism } 
			}
		}
	}
	if = {
		limit = {
			THIS = {
				has_dynamic_modifier = { modifier = EGY_moderate_sudanese_separatism }
			}
		}
		custom_effect_tooltip = EGY_remove_sudanese_separatism_tt
		hidden_effect = { 
			THIS = { 
				remove_dynamic_modifier = { modifier = EGY_moderate_sudanese_separatism } 
			}
		}
	}
	if = {
		limit = {
			THIS = {
				has_dynamic_modifier = { modifier = EGY_mild_sudanese_separatism }
			}
		}
		custom_effect_tooltip = EGY_remove_sudanese_separatism_tt
		hidden_effect = { 
			THIS = {
				remove_dynamic_modifier = { modifier = EGY_mild_sudanese_separatism } 
			}
		}
	}
}

# Sudanese Elections

EGY_calculate_elections_chance = {
    set_temp_variable = {
        EGY_sum_chance = 0
    }
    set_temp_variable = {
        EGY_divide_by = 100
    }
    add_to_temp_variable = { sum_odds = EGY_integration_chance }
    add_to_temp_variable = { sum_odds = EGY_autonomy_chance }
    add_to_temp_variable = { sum_odds = EGY_independence_chance }
    divide_temp_variable = {
        divide_by = EGY_sum_chance
    }
    multiply_variable = {
        EGY_integration_chance = divide_by
    }
    multiply_variable = {
        EGY_autonomy_chance = divide_by
    }
    multiply_variable = {
        EGY_independence_chance = divide_by
    }
}
EGY_add_integration_chance = {
    add_to_variable = {
        EGY_integration_chance = EGY_integration_chance_add
    }
    set_temp_variable = {
        EGY_integration_chance_calc = EGY_integration_chance_add
    }
    divide_temp_variable = {
        EGY_integration_chance_calc = 2
    }
    subtract_from_variable = {
        EGY_autonomy_chance = EGY_integration_chance_calc
    }
    subtract_from_variable = {
        EGY_independence_chance = EGY_integration_chance_calc
    }
	set_variable = {
		EGY_integration_chance_add = 0
	}
}
EGY_add_autonomy_chance = {
    add_to_variable = {
        EGY_autonomy_chance = EGY_autonomy_chance_add
    }
    set_temp_variable = {
        EGY_autonomy_chance_calc = EGY_autonomy_chance_add
    }
    divide_temp_variable = {
        EGY_autonomy_chance_calc = 2
    }
    subtract_from_variable = {
        EGY_integration_chance = EGY_autonomy_chance_calc
    }
    subtract_from_variable = {
        EGY_independence_chance = EGY_autonomy_chance_calc
    }
	set_variable = {
		EGY_autonomy_chance_add = 0
	}
}
