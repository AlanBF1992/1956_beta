 
 ####################################
 #  INC - Indian National Congress  #
 #     UP/UPA - Unionist Party      #
 # IFB/ILP Independent Labour Party #
 ####################################

raj_calculate_election = {
	hidden_effect = {
		RAJ = {
			set_variable = {
				inc_control = 0
			}
			every_owned_state = {
				limit = { INC_Majority = yes }
				RAJ = {add_to_variable = { inc_control = 1 }}
			}
			divide_variable = { inc_control = 11 }
			multiply_variable = { inc_control = 100 }
		}
		RAJ = {
			set_variable = {
				upa_control = 0
			}
			every_owned_state = {
				limit = { UPA_Majority = yes }
				RAJ = {add_to_variable = { upa_control = 1 }}
			}
			divide_variable = { upa_control = 11 }
			multiply_variable = { upa_control = 100 }
		}
		RAJ = {
			set_variable = {
				ifb_control = 0
			}
			every_owned_state = {
				limit = { IFB_Majority = yes }
				RAJ = {add_to_variable = { ifb_control = 1 }}
			}
			divide_variable = { ifb_control = 11 }
			multiply_variable = { ifb_control = 100 }
		}
		RAJ = {
			set_variable = { temp1 = inc_control }
			add_to_variable = { temp1 = upa_control }
			add_to_variable = { temp1 = ifb_control }
			set_variable = {
				neutral_control = 100
			}
			subtract_from_variable = { neutral_control = temp1 }
			
		}
	}
}
raj_decrease_influence_by_1 = { 
	if = { limit = { check_variable = { inc > 0 } } add_to_variable = { inc = -1 } }
	if = { limit = { check_variable = { ifb > 0 } } add_to_variable = { ifb = -1 } }
	if = { limit = { check_variable = { upa > 0 } } add_to_variable = { upa = -1 } }
	if = { limit = { check_variable = { neutral > 0 } } add_to_variable = { neutral = -1 } }
	raj_calculate_election = yes
}
raj_increase_selected_influence_by_1 = {
	if = { limit = { RAJ = { has_country_flag = inc_support } } add_to_variable = { inc = 1 } custom_effect_tooltip = raj_inc_1 }
	if = { limit = { RAJ = { has_country_flag = ifb_support } } add_to_variable = { ifb = 1 } custom_effect_tooltip = raj_ifb_1 }
	if = { limit = { RAJ = { has_country_flag = upa_support } } add_to_variable = { upa = 1 } custom_effect_tooltip = raj_upa_1 }
	raj_calculate_election = yes
}
increase_enemy_support_by_1 = {
	hidden_effect = {
		if = { limit = { RAJ = { has_country_flag = inc_operation } } add_to_variable = { inc = 1 } }
		if = { limit = { RAJ = { has_country_flag = ifb_operation } } add_to_variable = { ifb = 1 } }
		if = { limit = { RAJ = { has_country_flag = upa_operation } } add_to_variable = { upa = 1 } }
		raj_calculate_election = yes
	}
}
raj_lost_election_consequences = {
	if = {
		limit = {
			has_country_flag = INC_victory
		}
		unlock_national_focus = RAJ_Secure_Rural_Hindus
	}
	if = {
		limit = {
			has_country_flag = UP_victory
		}
		unlock_national_focus = RAJ_Content_for_British_Rule
	}
	if = {
		limit = {
			has_country_flag = ILP_victory
		}
		unlock_national_focus = RAJ_Appeal_to_the_Low_Castes
	}
}
raj_calculate_popularity_post_election = {
	hidden_effect = {
		news_event = {
			id = india.5
			hours = 50
		}
		
		set_party_name = {
			ideology = neutrality
			name = "UP"
			long_name = "Unionist Party"
		}
		if = {
			limit = {
				check_variable = {
					neutral_control > 0
				}
			}
			divide_variable = {
				neutral_control = 3
			}
			add_to_variable = {
				inc_control = neutral_control
			}
			add_to_variable = {
				upa_control = neutral_control
			}
			add_to_variable = {
				ifb_control = neutral_control
			}
		}
		if = {
			limit = {
				NOT = {
					check_variable = {
						inc_control = 0
					}
					check_variable = {
						upa_control = 0
					}
					check_variable = {
						ifb_control = 0
					}
				}
				
			}	
			set_political_party = {
				ideology = democratic
				popularity = inc_control
			}
			set_political_party = {
				ideology = communism
				popularity = ifb_control
			}
			set_political_party = {
				ideology = neutrality
				popularity = upa_control
			}
			set_political_party = {
				ideology = fascism
				popularity = 0
			}
		}
	}
}
ilp_srl_uprising = {
	custom_effect_tooltip = ilp_srl_uprising
	hidden_effect = {
		SRL = {
			transfer_state = 422
			load_oob = SRL_revolution
			declare_war_on = {
				target = ENG
				type = topple_government 
			}
			set_global_flag = sri_lankan_rebellion
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = var:RAJ.SRL_arms
				producer = RAJ
			}
			set_politics = {
				ruling_party = communism
				elections_allowed = yes
			}
			set_political_party = {
				ideology = communism
				popularity = var:RAJ.SRL_pol
			}
			set_cosmetic_tag = SRL_Revolution
			inherit_technology = RAJ
			add_offsite_building = { type = arms_factory level = 2 }
		}
	}
}
ilp_nep_uprising = {
	custom_effect_tooltip = ilp_nep_uprising
	hidden_effect = { 
		NEP = {
			if = {
				limit = {
					NEP = {
						is_subject = yes
					}
				}
				Overlord = {
					set_autonomy = {
						target = NEP
						autonomy_state = autonomy_free
					}
					create_wargoal = {
						type = puppet_wargoal_focus
						target = NEP
					}
				}
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = var:RAJ.NEP_arms
				producer = RAJ
			}
			leave_faction = yes
			set_politics = {
				ruling_party = communism
				elections_allowed = yes
			}
			set_political_party = {
				ideology = communism
				popularity = var:RAJ.NEP_pol
			}
			set_global_flag = nepalese_rebellion
		}
	}
}
ilp_bhu_uprising = {
	custom_effect_tooltip = ilp_bhu_uprising
	hidden_effect = {
		BHU = {
			if = {
				limit = {
					BHU = {
						is_subject = yes
					}
				}
				Overlord = {
					set_autonomy = {
						target = BHU
						autonomy_state = autonomy_free
					}
					create_wargoal = {
						type = puppet_wargoal_focus
						target = BHU
					}
				}
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = var:RAJ.BHU_arms
				producer = RAJ
			}
			leave_faction = yes
			set_politics = {
				ruling_party = communism
				elections_allowed = yes
			}
			set_political_party = {
				ideology = communism
				popularity = var:RAJ.BHU_pol
			}
			set_global_flag = bhutanese_rebellion
		}
	}
}
ilp_national_increase = {
	if = {
		limit = {
			has_idea = RAJ_National_Communism_2
		}
		swap_ideas = {
			remove_idea = RAJ_National_Communism_2
			add_idea = RAJ_National_Communism_3
		}
	}
	else_if = {
		limit = {
			has_idea = RAJ_National_Communism_1
		}
		swap_ideas = {
			remove_idea = RAJ_National_Communism_1 
			add_idea = RAJ_National_Communism_2
		}
	}
	else_if = {
		limit = {
			has_idea = RAJ_National_Communism_0
		}
		swap_ideas = {
			remove_idea = RAJ_National_Communism_0
			add_idea = RAJ_National_Communism_1
		}
	}
	else_if = {
		limit = { always = yes } #In the sense of preserving structure
		add_ideas = RAJ_National_Communism_0
	}
}
ilp_international_increase = {
	if = {
		limit = {
			has_idea = RAJ_International_Communism_2
		}
		swap_ideas = {
			remove_idea = RAJ_International_Communism_2
			add_idea = RAJ_International_Communism_3
		}
	}
	else_if = {
		limit = {
			has_idea = RAJ_International_Communism_1
		}
		swap_ideas = {
			remove_idea = RAJ_International_Communism_1 
			add_idea = RAJ_International_Communism_2
		}
	}
	else_if = {
		limit = {
			has_idea = RAJ_International_Communism_0
		}
		swap_ideas = {
			remove_idea = RAJ_International_Communism_0
			add_idea = RAJ_International_Communism_1
		}
	}
	else_if = {
		limit = { always = yes } #In the sense of preserving structure
		add_ideas = RAJ_International_Communism_0
	}
}
prince_independence_effect = {
	#tbd
	custom_effect_tooltip = "INDEPENDENCE"
	PAK = { transfer_state = PREV }
}
prince_integration = {
	#tbd
	custom_effect_tooltip = "INTEGRATION"
	WHY = { transfer_state = PREV }
}