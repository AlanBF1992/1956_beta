EGY_counter_rebels_in_sudan_category = {

	EGY_supress_sudanese_separatists_in_khartoum = {

		icon = GFX_decision_generic_ignite_civil_war
	
		available = {
			NOT = { has_country_flag = EGY_counterd_sudanese_separatists_recently }
			has_full_control_of_state = 551
		}
	
		highlight_states = {
			highlight_state_targets = {
				state = 551
			} 
		} 
	
		custom_cost_trigger = {
			command_power > 14
		}

		custom_cost_text = EGY_decision_cost_command_power

		visible = {
			AND = {
				has_full_control_of_state = 551
				NOT = {
					551 = {
							is_core_of = EGY
						compliance < 90 # testing number
						resistance > 30
					}
				}
			}
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
					has_stability > 50
				}
			}
			modifier = {
				has_manpower < 30000
				has_war = yes
				has_war_support < 30
				factor = 0
			}
			modifier = {
				factor = 10
				549 = { resistance > 50 }
			}
			modifier = {
				factor = 10
				549 = {
					resistance > 30
					compliance < 20
				}
			}
		}
	
		complete_effect = {
			add_command_power = -15 
			random_list = {
				55 = {
					modifier = {
						factor = 0.25
						551 = { resistance > 30 }
					}
					modifier = {
						add = 5
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 1
						}
					}
					modifier = {
						add = 10
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 2
						}
					}
					modifier = {
						add = 15
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 3
						}
					}
					modifier = {
						add = 25
						has_country_flag = {
						flag = EGY_failed_against_sudanese_separatists
							value = 4
						}
					}
					modifier = {
						add = 100
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value > 4
						}
					}
					country_event = { id = bftb_turkey.110 days = 1 }
					effect_tooltip = {
						551 = { 
							add_compliance = 10
							add_resistance = -15
						}
					}
					hidden_effect = { 
						if = {
							limit = {
								has_country_flag = EGY_failed_against_sudanese_separatists
							}
							clr_country_flag = EGY_failed_against_sudanese_separatists
						}
					}
				}
				45 = {
					modifier = {
						factor = 1.2
						551 = { compliance > 30 }
					}
					country_event = { id = bftb_turkey.111 days = 1 }
					effect_tooltip = {
						add_stability = -0.05
						551 = { 
							add_compliance = -5
							add_resistance = 10
						}
					}
					hidden_effect = {
						set_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 1
						}
						if = {
							limit = {
								NOT = { has_country_flag = EGY_failed_against_sudanese_separatists }
							}
							set_country_flag = {
								flag = EGY_failed_against_sudanese_separatists
								value = 1
							}
						}
						else_if = {
							limit = {
								has_country_flag = EGY_failed_against_sudanese_separatists
							}
							modify_country_flag = {
								flag = TUR_failed_against_kurd_rebels_flag
								value = 1
							}
						}
					}
				}
			}
			set_country_flag = {
				flag = EGY_counterd_sudanese_separatists_recently
				value = 1
				days = 30
			}
		}
	}
	EGY_supress_sudanese_separatists_in_darfur = {

		icon = GFX_decision_generic_ignite_civil_war
	
		available = {
			NOT = { has_country_flag = EGY_counterd_sudanese_separatists_recently }
			has_full_control_of_state = 549
		}
	
		highlight_states = {
			highlight_state_targets = {
				state = 549
			} 
		} 
	
		custom_cost_trigger = {
			command_power > 14
		}
	
		custom_cost_text = EGY_decision_cost_command_power
	
		visible = {
			AND = {
				has_full_control_of_state = 549
				NOT = {
					549 = {
							is_core_of = EGY
						compliance < 90 # testing number
						resistance > 30
					}
				}
			}
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				has_stability > 50
			}
			modifier = {
				factor = 0
				has_manpower < 30000
				has_war = yes
				has_war_support < 30
			}
			modifier = {
				factor = 10
				549 = { resistance > 50 }
			}
			modifier = {
				factor = 10
				549 = {
					resistance > 30
					compliance < 20
				}
			}
		}
	
		complete_effect = {
			add_command_power = -15 
			random_list = {
				55 = {
					modifier = {
						factor = 0.25
						549 = { resistance > 30 }
					}
					modifier = {
						add = 5
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 1
						}
					}
					modifier = {
						add = 10
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 2
						}
					}
					modifier = {
						add = 15
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 3
						}
					}
					modifier = {
						add = 25
						has_country_flag = {
						flag = EGY_failed_against_sudanese_separatists
							value = 4
						}
					}
					modifier = {
						add = 100
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value > 4
						}
					}
					country_event = { id = bftb_turkey.110 days = 1 }
					effect_tooltip = {
						549 = { 
							add_compliance = 10
							add_resistance = -15
						}
					}
					hidden_effect = { 
						if = {
							limit = {
								has_country_flag = EGY_failed_against_sudanese_separatists
							}
							clr_country_flag = EGY_failed_against_sudanese_separatists
						}
					}
				}
				45 = {
					modifier = {
						factor = 1.2
						549 = { compliance > 30 }
					}
					country_event = { id = bftb_turkey.111 days = 1 }
					effect_tooltip = {
						add_stability = -0.05
						549 = { 
							add_compliance = -5
							add_resistance = 10
						}
					}
					hidden_effect = {
						set_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 1
						}
						if = {
							limit = {
								NOT = { has_country_flag = EGY_failed_against_sudanese_separatists }
							}
							set_country_flag = {
								flag = EGY_failed_against_sudanese_separatists
								value = 1
							}
						}
						else_if = {
							limit = {
								has_country_flag = EGY_failed_against_sudanese_separatists
							}
							modify_country_flag = {
								flag = EGY_failed_against_sudanese_separatists
								value = 1
							}
						}
					}
				}
			}
			set_country_flag = {
				flag = EGY_counterd_sudanese_separatists_recently
				value = 1
				days = 30
			}
		}
	}
}

EGY_1936_anglo_egyptian_conference = {


	EGY_conference_duration_timer = {

		icon = GFX_decision_generic_speech

		priority = 3

		days_mission_timeout = 100
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		visible = {
			OR = {
				original_tag = EGY
				original_tag = ENG
			}
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		activation = {
			has_country_flag = EGY_1936_anglo_egyptian_conference_begins
		}

		fire_only_once = yes

		cancel_if_not_visible = yes

		is_good = no
	
		timeout_effect = {
			set_country_flag = EGY_1936_anglo_egyptian_conference_over
		}
	}
	EGY_extend_the_conference = {

		icon = GFX_decision_generic_special_project

		priority = 2
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		cost = 50

		visible = {
			OR = {
				original_tag = EGY
				original_tag = ENG
			}
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		activation = {
			has_country_flag = EGY_1936_anglo_egyptian_conference_begins
		}

		fire_only_once = yes

		cancel_if_not_visible = yes

		is_good = no
	
		timeout_effect = {
			add_days_mission_timeout = {
				mission = EGY_conference_duration_timer
				days = 30
			}
		}
	}

	# Egyptian version

	EGY_discuss_egypts_future_egyptian = {

		icon = GFX_decision_generic_political_discourse
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		visible = {
			original_tag = EGY
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		fire_only_once = yes

		ai_will_do = {
			
		}
	
		complete_effect = {
			add_political_power = 5
			set_country_flag = EGY_1936_anglo_egyptian_conference_decisions_flag
			unlock_decision_tooltip = EGY_discuss_egyptian_independence
			unlock_decision_tooltip = EGY_offer_naval_concessions
			unlock_decision_tooltip = EGY_propose_a_legal_alliance
			unlock_decision_tooltip = EGY_military_negotiations_in_sudan
			unlock_decision_tooltip = EGY_recognise_the_suez_canal_company
			unlock_decision_tooltip = EGY_political_concessions
		}
	}
	EGY_discuss_egyptian_independence = {

		icon = GFX_decision_generic_political_discourse
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		cost = 5

		visible = {
			has_country_flag = EGY_1936_anglo_egyptian_conference_decisions_flag
			original_tag = EGY
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		fire_only_once = yes

		ai_will_do = {
			
		}
	
		complete_effect = {
			ENG = {
				country_event = { id = egypt.4 hours = 12 }
			}

		}
	}
	EGY_propose_a_legal_alliance = {

		icon = GFX_decision_hol_exchange_intelligence_data
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		cost = 5

		visible = {
			has_country_flag = EGY_1936_anglo_egyptian_conference_decisions_flag
			original_tag = EGY
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		fire_only_once = yes

		ai_will_do = {
			
		}
	
		complete_effect = {
			add_to_variable = { var = EGY_egyptian_treaty_influence value = EGY_treaty_influence_medium_increase }
			custom_effect_tooltip = EGY_will_stay_in_allies
			set_country_flag = EGY_will_stay_in_allies_flag
			
		}
	}
	EGY_recognise_the_suez_canal_company = {

		icon = GFX_decision_eng_trade_unions_support
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		cost = 5

		visible = {
			has_country_flag = EGY_1936_anglo_egyptian_conference_decisions_flag
			original_tag = EGY
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		fire_only_once = yes

		ai_will_do = {
			
		}
	
		complete_effect = {
			add_to_variable = { var = EGY_egyptian_treaty_influence value = EGY_treaty_influence_high_increase }
			add_stability = -0.05
			remove_state_core = 901
			remove_state_core = 902
			
		}
	}
	EGY_political_concessions = {

		icon = GFX_decision_generic_political_rally
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		cost = 50

		visible = {
			has_country_flag = EGY_1936_anglo_egyptian_conference_decisions_flag
			original_tag = EGY
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		days_remove = 30

		days_re_enable = 0

		ai_will_do = {
			
		}
	
		complete_effect = {
			add_to_variable = { var = EGY_egyptian_treaty_influence value = EGY_treaty_influence_low_increase }

		}
	}
	EGY_offer_naval_concessions = {

		icon = GFX_decision_generic_naval
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		custom_cost_text = EGY_decision_cost_navy_experience

		custom_cost_trigger = {
			has_navy_experience > 9
		}

		visible = {
			has_country_flag = EGY_1936_anglo_egyptian_conference_decisions_flag
			original_tag = EGY
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		fire_only_once = yes

		ai_will_do = {
			
		}
	
		complete_effect = {
			add_to_variable = { var = EGY_egyptian_treaty_influence value = EGY_treaty_influence_small_increase }
			navy_experience = -10
			
		}
	}
	EGY_military_negotiations_in_sudan = {

		icon = GFX_decision_generic_military
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		custom_cost_text = EGY_decision_cost_army_experience

		custom_cost_trigger = {
			has_navy_experience > 9
		}

		visible = {
			has_country_flag = EGY_1936_anglo_egyptian_conference_decisions_flag
			original_tag = EGY
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		fire_only_once = yes

		ai_will_do = {
			
		}
	
		complete_effect = {
			add_to_variable = { var = EGY_egyptian_treaty_influence value = EGY_treaty_influence_small_increase }
			
		}
	}
	EGY_theaten_britain_with_italy = {

		icon = GFX_decision_generic_break_treaty
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
			ITA = {
				exists = yes
				NOT = {
					is_in_faction_with = ENG
				}
			}
		}

		custom_cost_trigger = {
			command_power > 14
		}

		custom_cost_text = EGY_decision_cost_command_power

		visible = {
			original_tag = EGY
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		fire_only_once = yes

		ai_will_do = {
			
		}
	
		complete_effect = {
			
		}
	}

	# British version

	EGY_discuss_egypts_future_british = {

		icon = GFX_decision_generic_political_discourse
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		visible = {
			original_tag = ENG
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		fire_only_once = yes

		ai_will_do = {
			
		}
	
		complete_effect = {
			add_political_power = 5
			add_country_flag = ENG_1936_anglo_egyptian_conference_decisions_flag
			unlock_decision_tooltip = ENG_weapons_for_egyptian_aid
			unlock_decision_tooltip = ENG_industrial_concessions_for_bases
			unlock_decision_tooltip = ENG_mutual_ship_research_treaty
			unlock_decision_tooltip = ENG_offer_assistance_against_sudanese_rebels
		}
	}
}

