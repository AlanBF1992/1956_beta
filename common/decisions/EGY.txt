EGY_debug = {
	
	EGY_activate_conference = {
		complete_effect = {
			country_event = { id = egypt.2 hours = 1 } 
			clr_country_flag = EGY_1936_anglo_egyptian_conference_over
			clr_country_flag = EGY_1936_anglo_egyptian_conference_extended
			ENG = {
				clr_country_flag = EGY_1936_anglo_egyptian_conference_over
				clr_country_flag = EGY_1936_anglo_egyptian_conference_extended
			}
		}
	}
	EGY_activate_conference_timeout = {
		complete_effect = {
			add_days_mission_timeout = {
				mission = EGY_conference_duration_timer
				days = -99
			}
		}
	}
	EGY_egyptian_low_treaty_influence_increase = {
		complete_effect = {
			EGY_egyptian_treaty_influence_low_increase_effect = yes 
		}
	}
	EGY_egyptian_medium_treaty_influence_increase = {
		complete_effect = {
			EGY_egyptian_treaty_influence_medium_increase_effect = yes
		}
	}
	EGY_egyptian_high_treaty_influence_increase = {
		complete_effect = {
			EGY_egyptian_treaty_influence_high_increase_effect = yes
		}
	}

	EGY_british_low_treaty_influence_increase = {
		complete_effect = {
			ENG = {
				EGY_british_treaty_influence_low_increase_effect = yes
			}
		}
	}
	EGY_british_medium_treaty_influence_increase = {
		complete_effect = {
			ENG = {
				EGY_british_treaty_influence_medium_increase_effect = yes
			}
		}
	}
	EGY_british_high_treaty_influence_increase = {
		complete_effect = {
			ENG = {
				EGY_british_treaty_influence_high_increase_effect = yes
			}
		}
	}
}

EGY_counter_rebels_in_sudan_category = {

	EGY_sudanese_uprising_timer = {

		icon = GFX_decision_revolt

		priority = 3

		days_mission_timeout = 30

		available = {
			has_civil_war = no
			SUD = { 
				exists = yes
			}
		}

		visible = {
			original_tag = EGY
			SUD = { 
				exists = no
			}
			OR = {
				has_civil_war = yes
				NOT = {
					is_subject_of = ENG
				}
			}
			any_state = {
				is_core_of = SUD
				is_controlled_by = ROOT
			}
		}

		activation = {
			has_country_flag = EGY_sudan_rebellion_soon
		}

		fire_only_once = yes

		cancel_if_not_visible = yes

		is_good = no
		
		timeout_effect = {
			set_country_flag = EGY_sudan_rebelled
			clr_country_flag = EGY_sudan_rebellion_soon
			country_event = { id = egypt.22 hours = 1 } 
			release = SUD
			SUD = {
				hidden_effect = {
					load_oob = SUD_rebellion
					inherit_technology = EGY
				}
				every_other_country = {
					limit = {
						original_tag = EGY
						has_civil_war = yes
					}
					declare_war_on = {
						target = PREV
						type = annex_everything
					}
					add_civil_war_target = PREV
				}
			}
			add_civil_war_target = SUD
		}
	}
	EGY_atbara_degree = {

		icon = GFX_decision_oppression

		priority = 2

		days_remove = 5

		cost = 80

		available = {
			controls_state = 551
			divisions_in_state = {
				size > 4
				state = 551
			}
		}

		visible = {
			original_tag = EGY
			controls_state = 551
			OR = {
				551 = {
					resistance > 40
				}
				has_country_flag = EGY_sudan_rebellion_soon
			}
		}

		fire_only_once = yes

		cancel_if_not_visible = yes

		is_good = no
		
		complete_effect = {
			add_stability = -0.03
			if = {
				limit = {
					has_country_flag = EGY_sudan_rebellion_soon
				}
				add_days_mission_timeout = {
					mission = EGY_sudanese_uprising_timer
					days = 20
				}
			}
			551 = {
				add_resistance = -25
				add_compliance = -10
			}
		}
	}
	EGY_supress_sudanese_separatists_in_khartoum = {

		icon = GFX_decision_generic_ignite_civil_war
	
		available = {
			NOT = { has_country_flag = EGY_counterd_sudanese_separatists_recently }
			controls_state = 551
		}
	
		highlight_states = {
			highlight_state_targets = {
				state = 551
			} 
		} 
	
		custom_cost_trigger = {
			command_power > 14
		}

		custom_cost_text = EGY_decision_cost_command_power

		visible = {
			AND = {
				controls_state = 551
				NOT = {
					551 = {
						is_core_of = EGY
						compliance < 90 # testing number
						resistance > 30
					}
				}
			}
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				has_stability > 50
			}
			modifier = {
				has_manpower < 30000
				has_war = yes
				has_war_support < 30
				factor = 0
			}
			modifier = {
				factor = 10
				549 = { resistance > 50 }
			}
			modifier = {
				factor = 10
				549 = {
					resistance > 30
					compliance < 20
				}
			}
		}
	
		complete_effect = {
			add_command_power = -15 
			random_list = {
				55 = {
					modifier = {
						factor = 0.25
						551 = { resistance > 30 }
					}
					modifier = {
						add = 5
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 1
						}
					}
					modifier = {
						add = 10
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 2
						}
					}
					modifier = {
						add = 15
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 3
						}
					}
					modifier = {
						add = 25
						has_country_flag = {
						flag = EGY_failed_against_sudanese_separatists
							value = 4
						}
					}
					modifier = {
						add = 100
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value > 4
						}
					}
					country_event = { id = bftb_turkey.110 days = 1 }
					effect_tooltip = {
						551 = { 
							add_compliance = 5
							add_resistance = -10
						}
					}
					hidden_effect = { 
						if = {
							limit = {
								has_country_flag = EGY_failed_against_sudanese_separatists
							}
							clr_country_flag = EGY_failed_against_sudanese_separatists
						}
					}
				}
				45 = {
					modifier = {
						factor = 1.2
						551 = { compliance > 30 }
					}
					country_event = { id = bftb_turkey.111 days = 1 }
					effect_tooltip = {
						add_stability = -0.05
						551 = { 
							add_compliance = -3
							add_resistance = 5
						}
					}
					hidden_effect = {
						set_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 1
						}
						if = {
							limit = {
								NOT = { has_country_flag = EGY_failed_against_sudanese_separatists }
							}
							set_country_flag = {
								flag = EGY_failed_against_sudanese_separatists
								value = 1
							}
						}
						else_if = {
							limit = {
								has_country_flag = EGY_failed_against_sudanese_separatists
							}
							modify_country_flag = {
								flag = TUR_failed_against_kurd_rebels_flag
								value = 1
							}
						}
					}
				}
			}
			set_country_flag = {
				flag = EGY_counterd_sudanese_separatists_recently
				value = 1
				days = 30
			}
		}
	}
	EGY_supress_sudanese_separatists_in_darfur = {

		icon = GFX_decision_generic_ignite_civil_war
	
		available = {
			NOT = { has_country_flag = EGY_counterd_sudanese_separatists_recently }
			controls_state = 549
		}
	
		highlight_states = {
			highlight_state_targets = {
				state = 549
			} 
		} 
	
		custom_cost_trigger = {
			command_power > 14
		}
	
		custom_cost_text = EGY_decision_cost_command_power
	
		visible = {
			AND = {
				controls_state = 549
				NOT = {
					549 = {
						is_core_of = EGY
						compliance < 90 # testing number
						resistance > 30
					}
				}
			}
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				has_stability > 50
			}
			modifier = {
				has_manpower < 30000
				has_war = yes
				has_war_support < 30
				factor = 0
			}
			modifier = {
				factor = 10
				549 = { resistance > 50 }
			}
			modifier = {
				factor = 10
				549 = {
					resistance > 30
					compliance < 20
				}
			}
		}
	
		complete_effect = {
			add_command_power = -15 
			random_list = {
				55 = {
					modifier = {
						factor = 0.25
						549 = { resistance > 30 }
					}
					modifier = {
						add = 5
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 1
						}
					}
					modifier = {
						add = 10
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 2
						}
					}
					modifier = {
						add = 15
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 3
						}
					}
					modifier = {
						add = 25
						has_country_flag = {
						flag = EGY_failed_against_sudanese_separatists
							value = 4
						}
					}
					modifier = {
						add = 100
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value > 4
						}
					}
					country_event = { id = bftb_turkey.110 days = 1 }
					effect_tooltip = {
						549 = { 
							add_compliance = 5
							add_resistance = -10
						}
					}
					hidden_effect = { 
						if = {
							limit = {
								has_country_flag = EGY_failed_against_sudanese_separatists
							}
							clr_country_flag = EGY_failed_against_sudanese_separatists
						}
					}
				}
				45 = {
					modifier = {
						factor = 1.2
						549 = { compliance > 30 }
					}
					country_event = { id = bftb_turkey.111 days = 1 }
					effect_tooltip = {
						add_stability = -0.05
						549 = { 
							add_compliance = -3
							add_resistance = 5
						}
					}
					hidden_effect = {
						set_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 1
						}
						if = {
							limit = {
								NOT = { has_country_flag = EGY_failed_against_sudanese_separatists }
							}
							set_country_flag = {
								flag = EGY_failed_against_sudanese_separatists
								value = 1
							}
						}
						else_if = {
							limit = {
								has_country_flag = EGY_failed_against_sudanese_separatists
							}
							modify_country_flag = {
								flag = EGY_failed_against_sudanese_separatists
								value = 1
							}
						}
					}
				}
			}
			set_country_flag = {
				flag = EGY_counterd_sudanese_separatists_recently
				value = 1
				days = 30
			}
		}
	}
	EGY_supress_sudanese_separatists_in_jonglei = {

		icon = GFX_decision_generic_ignite_civil_war
	
		available = {
			NOT = { has_country_flag = EGY_counterd_sudanese_separatists_recently }
			controls_state = 903
		}
	
		highlight_states = {
			highlight_state_targets = {
				state = 903
			} 
		} 
	
		custom_cost_trigger = {
			command_power > 14
		}
	
		custom_cost_text = EGY_decision_cost_command_power
	
		visible = {
			AND = {
				controls_state = 903
				NOT = {
					903 = {
						is_core_of = EGY
						compliance < 90 # testing number
						resistance > 30
					}
				}
			}
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				has_stability > 50
			}
			modifier = {
				has_manpower < 30000
				has_war = yes
				has_war_support < 30
				factor = 0
			}
			modifier = {
				factor = 10
				903 = { resistance > 50 }
			}
			modifier = {
				factor = 10
				903 = {
					resistance > 30
					compliance < 20
				}
			}
		}
	
		complete_effect = {
			add_command_power = -15 
			random_list = {
				55 = {
					modifier = {
						factor = 0.25
						903 = { resistance > 30 }
					}
					modifier = {
						add = 5
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 1
						}
					}
					modifier = {
						add = 10
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 2
						}
					}
					modifier = {
						add = 15
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 3
						}
					}
					modifier = {
						add = 25
						has_country_flag = {
						flag = EGY_failed_against_sudanese_separatists
							value = 4
						}
					}
					modifier = {
						add = 100
						has_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value > 4
						}
					}
					country_event = { id = bftb_turkey.110 days = 1 }
					effect_tooltip = {
						903 = { 
							add_compliance = 5
							add_resistance = -10
						}
					}
					hidden_effect = { 
						if = {
							limit = {
								has_country_flag = EGY_failed_against_sudanese_separatists
							}
							clr_country_flag = EGY_failed_against_sudanese_separatists
						}
					}
				}
				45 = {
					modifier = {
						factor = 1.2
						903 = { compliance > 30 }
					}
					country_event = { id = bftb_turkey.111 days = 1 }
					effect_tooltip = {
						add_stability = -0.05
						903 = { 
							add_compliance = -3
							add_resistance = 5
						}
					}
					hidden_effect = {
						set_country_flag = {
							flag = EGY_failed_against_sudanese_separatists
							value = 1
						}
						if = {
							limit = {
								NOT = { has_country_flag = EGY_failed_against_sudanese_separatists }
							}
							set_country_flag = {
								flag = EGY_failed_against_sudanese_separatists
								value = 1
							}
						}
						else_if = {
							limit = {
								has_country_flag = EGY_failed_against_sudanese_separatists
							}
							modify_country_flag = {
								flag = EGY_failed_against_sudanese_separatists
								value = 1
							}
						}
					}
				}
			}
			set_country_flag = {
				flag = EGY_counterd_sudanese_separatists_recently
				value = 1
				days = 20
			}
		}
	}
	EGY_integrate_khartoum = {

		icon = GFX_decision_generic_form_nation

		days_remove = 30
	
		available = {
			has_war = no
			NOT = { has_country_flag = EGY_counterd_sudanese_separatists_recently }
			has_full_control_of_state = 551
			551 = {
				resistance < 20
				compliance > 35
			}
		}

		cost = 50
	
		highlight_states = {
			highlight_state_targets = {
				state = 551
			} 
		} 
	
		visible = {
			has_full_control_of_state = 551
			OR = {
				has_completed_focus = EGY_pacify_the_sudanese
				has_completed_focus = EGY_sudanese_integrated_autonomy
			}
			551 = {
				NOT = {
					is_core_of = EGY
				}
			}
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				has_stability > 50
				551 = {
					resistance < 20
					compliance > 35
				}
			}
		}
	
		remove_effect = {
			add_state_core = 551
			if = {
                limit = {
                    551 = {
                        has_state_flag = EGY_sudanese_separatism_flag
                    }
                }
                551 = {
                    remove_dynamic_modifier = {
                        modifier = EGY_sudanese_separatism
                    }
                    clr_state_flag = EGY_sudanese_separatism_flag
                }
            }
			hidden_effect = {
				if = {
					limit = {
						NOT = {
							552 = {
								is_core_of = EGY
							}
						}
					}
					add_state_core = 552
				}
			}
		}
	}
	EGY_integrate_darfur = {

		icon = GFX_decision_generic_form_nation

		days_remove = 30
	
		available = {
			has_war = no
			NOT = { has_country_flag = EGY_counterd_sudanese_separatists_recently }
			has_full_control_of_state = 549
			549 = {
				resistance < 20
				compliance > 35
			}
		}

		cost = 50
	
		highlight_states = {
			highlight_state_targets = {
				state = 549
			} 
		} 
	
		visible = {
			has_full_control_of_state = 549
			OR = {
				has_completed_focus = EGY_pacify_the_sudanese
				has_completed_focus = EGY_sudanese_integrated_autonomy
			}
			549 = {
				NOT = {
					is_core_of = EGY
				}
			}
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				has_stability > 50
				549 = {
					resistance < 20
					compliance > 35
				}
			}
		}
	
		remove_effect = {
			add_state_core = 549
			if = {
                limit = {
                    549 = {
                        has_state_flag = EGY_sudanese_separatism_flag
                    }
                }
                549 = {
                    remove_dynamic_modifier = {
                        modifier = EGY_sudanese_separatism
                    }
                    clr_state_flag = EGY_sudanese_separatism_flag
                }
            }
			hidden_effect = {
				if = {
					limit = {
						NOT = {
							552 = {
								is_core_of = EGY
							}
						}
					}
					add_state_core = 552
				}
			}
		}
	}
	EGY_integrate_jonglei = {

		icon = GFX_decision_generic_form_nation

		days_remove = 30
	
		available = {
			has_war = no
			NOT = { has_country_flag = EGY_counterd_sudanese_separatists_recently }
			has_full_control_of_state = 903
			551 = {
				resistance < 20
				compliance > 35
			}
		}

		cost = 50
	
		highlight_states = {
			highlight_state_targets = {
				state = 903
			} 
		} 
	
		visible = {
			has_full_control_of_state = 549
			OR = {
				has_completed_focus = EGY_pacify_the_sudanese
				has_completed_focus = EGY_sudanese_integrated_autonomy
			}
			903 = {
				NOT = {
					is_core_of = EGY
				}
			}
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				has_stability > 50
				903 = {
					resistance < 20
					compliance > 35
				}
			}
		}
	
		remove_effect = {
			add_state_core = 903
			if = {
                limit = {
                    903 = {
                        has_state_flag = EGY_sudanese_separatism_flag
                    }
                }
                903 = {
                    remove_dynamic_modifier = {
                        modifier = EGY_sudanese_separatism
                    }
                    clr_state_flag = EGY_sudanese_separatism_flag
                }
            }
		}
	}
}

EGY_1936_anglo_egyptian_conference = {


	EGY_conference_duration_timer = {

		icon = GFX_decision_generic_speech

		priority = 3

		days_mission_timeout = 100

		available = {
			hidden_trigger = { 
				always = no 
			}
		}

		visible = {
			OR = {
				original_tag = EGY
				original_tag = ENG
			}
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		activation = {
			has_country_flag = EGY_1936_anglo_egyptian_conference_begins
		}

		fire_only_once = yes

		cancel_if_not_visible = no

		is_good = no
		
		timeout_effect = {
			if = { # Ended in Egyptian favor
				limit = { 
					check_variable = { EGY_egyptian_treaty_influence = EGY_british_treaty_influence compare = greater_than }
				}
				set_country_flag = EGY_1936_anglo_egyptian_conference_ended_in_egypts_favor
				EGY = {
					country_event = { id = egypt.15  }
				}
				ENG = {
					country_event = { id = egypt.15  }
				}
			}
			else_if = { # Ended in British favor
				limit = {	
					check_variable = { EGY_british_treaty_influence = EGY_egyptian_treaty_influence compare = greater_than }
				}
				set_country_flag = EGY_1936_anglo_egyptian_conference_ended_in_britains_favor
				EGY = {
					country_event = { id = egypt.16  }
				}
				ENG = {
					country_event = { id = egypt.16  }
				}
			}
			else = {
				set_country_flag = EGY_1936_anglo_egyptian_conference_ended_in_egypts_favor
				EGY = {
					country_event = { id = egypt.17  }
				}
				ENG = {
					country_event = { id = egypt.17  }
				}
			}
			clr_country_flag = EGY_1936_anglo_egyptian_conference_begins
			set_country_flag = EGY_1936_anglo_egyptian_conference_over	
		}
	}
	EGY_extend_the_conference = {

		icon = GFX_decision_generic_special_project

		priority = 2
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		cost = 10

		visible = {
			NOT = {
				has_country_flag = EGY_1936_anglo_egyptian_conference_extended
			}
			OR = {
				original_tag = EGY
				original_tag = ENG
			}
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		fire_only_once = yes

		complete_effect = {
			if = {
				limit = {
					original_tag = EGY
				}
				set_country_flag = EGY_1936_anglo_egyptian_conference_extended
				EGY_british_treaty_influence_medium_increase_effect = yes
				#add_to_variable = { var = EGY_british_treaty_influence value = EGY_treaty_influence_medium_increase }
				ENG = {
					set_country_flag = EGY_1936_anglo_egyptian_conference_extended
				}
			}
			else_if = {
				limit = {
					original_tag = ENG
				}
				set_country_flag = EGY_1936_anglo_egyptian_conference_extended
				EGY_egyptian_treaty_influence_medium_decrease_effect = yes
				#add_to_variable = { var = EGY_egyptian_treaty_influence value = EGY_treaty_influence_medium_increase }
				EGY = {
					set_country_flag = EGY_1936_anglo_egyptian_conference_extended
				}
			}
			add_days_mission_timeout = {
				mission = EGY_conference_duration_timer
				days = 20
			}
		}
	}

	# Egyptian version

	EGY_discuss_egyptian_independence = {

		icon = GFX_decision_generic_political_discourse
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		cost = 5

		visible = {
			has_country_flag = EGY_1936_anglo_egyptian_conference_decisions_flag
			original_tag = EGY
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}
	
		complete_effect = {
			ENG = {
				country_event = { id = egypt.7 hours = 24 }
			}

		}
	}
	EGY_propose_a_legal_alliance = {

		icon = GFX_decision_hol_exchange_intelligence_data
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		cost = 5

		visible = {
			original_tag = EGY
			EGY = {
				exists = yes
				is_subject_of = ENG
			}
		}

		fire_only_once = yes

		ai_will_do = {
			base = 0
			modifier = {
				add = 15
				has_opinion = {
					target = ENG
					value > 9
				}
			}
		}
	
		complete_effect = {
			EGY_egyptian_treaty_influence_low_increase_effect = yes 
			add_to_variable = { var = EGY_egyptian_treaty_influence_icon_value value = 5 }
			custom_effect_tooltip = EGY_will_stay_in_allies
			set_country_flag = EGY_will_stay_in_allies_flag
		}
	}
	EGY_recognise_the_suez_canal_company = {

		icon = GFX_decision_eng_trade_unions_support
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		cost = 5

		visible = {
			original_tag = EGY
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		fire_only_once = yes

		ai_will_do = {
			base = 0
		}
	
		complete_effect = {
			EGY_egyptian_treaty_influence_high_increase_effect = yes
			#add_to_variable = { var = EGY_egyptian_treaty_influence value = EGY_treaty_influence_high_increase }
			ENG = {
				set_country_flag = EGY_recognise_the_suez_canal_company_flag
			}
			add_stability = -0.05
			remove_state_core = 901
			remove_state_core = 902
			
		}
	}
	EGY_political_concessions = {

		icon = GFX_decision_generic_political_rally
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		cost = 25

		visible = {
			original_tag = EGY
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		days_remove = 30

		days_re_enable = 0

		ai_will_do = {
			base = 5
			modifier = {
				add = 15
				has_political_power > 100
			}
		}
	
		remove_effect = {
			EGY_egyptian_treaty_influence_low_increase_effect = yes
		}
	}
	EGY_offer_naval_concessions = {

		icon = GFX_decision_generic_merge_plant_ship
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		custom_cost_text = EGY_decision_cost_navy_experience

		custom_cost_trigger = {
			has_navy_experience > 9
		}

		visible = {
			original_tag = EGY
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		fire_only_once = yes

		ai_will_do = {
			base = 10
			modifier = {
				add = 20
				has_navy_experience > 10
			}
		}
	
		complete_effect = {
			EGY_egyptian_treaty_influence_low_increase_effect = yes
			#add_to_variable = { var = EGY_egyptian_treaty_influence value = EGY_treaty_influence_small_increase }
			navy_experience = -10
			ENG = {
				diplomatic_relation = {
					country = EGY
					relation = docking_rights
					active = yes
				}
			}
		}
	}
	EGY_military_negotiations_in_sudan = {

		icon = GFX_decision_generic_military
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		custom_cost_text = EGY_decision_cost_army_experience

		custom_cost_trigger = {
			has_army_experience > 9
		}

		visible = {
			original_tag = EGY
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		days_remove = 30

		days_re_enable = 2

		ai_will_do = {
			base = 0
			modifier = {
				add = 3
				has_army_experience > 10
			}
		}

		remove_effect = {
			EGY_egyptian_treaty_influence_low_increase_effect = yes
		}

		complete_effect = {
			army_experience = -10
		}
	}
	EGY_theaten_britain_with_italy = {

		icon = GFX_decision_generic_break_treaty
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
			ITA = {
				exists = yes
				NOT = {
					has_government = democratic
					is_in_faction_with = ENG
				}
			}
		}

		custom_cost_trigger = {
			command_power > 14
		}

		custom_cost_text = EGY_decision_cost_command_power

		visible = {
			original_tag = EGY
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		fire_only_once = yes

		ai_will_do = {
			base = 0
			modifier = {
				add = 15
				has_opinion = {
					target = ENG
					value < 19
				}
				ITA = {
					num_of_factories > 45
				}
			}
		}
	
		complete_effect = {
			ENG = {
				country_event = { id = egypt.4 hours = 12 }
			}
		}
	}

	# British version

	EGY_political_concessions_british = {

		icon = GFX_decision_generic_political_rally
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		cost = 25

		visible = {
			original_tag = ENG
			
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		days_remove = 30

		days_re_enable = 0

		ai_will_do = {
			base = 5
			modifier = {
				add = 15
				has_political_power > 100
			}
		}
	
		remove_effect = {
			EGY_british_treaty_influence_low_increase_effect = yes
		}
	}
	EGY_weapons_for_aid = { 

		icon = GFX_decision_generic_prepare_civil_war
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		visible = {
			original_tag = ENG
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		days_remove = 30

		days_re_enable = 5

		ai_will_do = {
			base = 0
			modifier = {
				add = 5
				num_of_factories > 60
			}
			modifier = {
				add = 10
				stockpile_ratio = { 
		  			archetype = infantry_equipment
		  			ratio > 0.8
		  		}
			}
		}

		remove_effect = {
			EGY_british_treaty_influence_low_increase_effect = yes 
		}
	
		complete_effect = {
			send_equipment = {
				equipment = infantry_equipment
				amount = 250
				target = EGY
			}
		}
	}
	EGY_industrial_concessions_for_bases = { 

		icon = GFX_decision_generic_factory
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		cost = 5

		visible = {
			original_tag = ENG
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		fire_only_once = yes

		ai_will_do = {
			base = 10
			modifier = {
				add = 30
				num_of_factories > 60
			}
			modifier = {
				add = 10
				is_historical_focus_on = yes
			}
		}
	
		complete_effect = {
			EGY_british_treaty_influence_medium_increase_effect = yes
			EGY = {
				diplomatic_relation = {
					country = ENG
					relation = military_access
					active = yes
				}
			}
			add_timed_idea = {
				idea = EGY_british_industrial_concessions_to_egypt
				days = 30
			}
			EGY = {
				add_timed_idea = {
					idea = EGY_british_sending_industrial_concessions
					days = 30
				}
			}
			EGY = {
				country_event = { id = egypt.10 hours = 12 }
			}
		}
	}
	EGY_return_sudanese_resources = {

		icon = GFX_decision_aluminium
	
		available = {
			has_war = no
			903 = {
				has_state_flag = EGY_britain_owns_darfur_resources
			}
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		cost = 10

		visible = {
			original_tag = ENG
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_tech = excavation_2
			}
		}

		complete_effect = {
			EGY_british_treaty_influence_medium_increase_effect = yes
			add_stability = -0.02
			remove_resource_rights = 903
		}
	}
	EGY_mutual_naval_research_treaty = { 

		icon = GFX_decision_generic_naval
	
		available = {
			has_war = no
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		custom_cost_text = EGY_decision_cost_navy_experience

		custom_cost_trigger = {
			has_navy_experience > 9
		}

		visible = {
			original_tag = ENG
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		fire_only_once = yes

		ai_will_do = {
			base = 10
			modifier = {
				add = 20
				has_navy_experience > 10
			}
		}
	
		complete_effect = {
			EGY_british_treaty_influence_low_increase_effect = yes 
			add_doctrine_cost_reduction = {
                uses = 1
                cost_reduction = 0.5
                category = naval_doctrine
            }
			EGY = {
				country_event = { id = egypt.11 hours = 12 }
			}
		}
	}
	EGY_offer_assistance_against_sudanese_rebels = {

		icon = GFX_decision_generic_military
	
		available = {
			has_war = no
			OR = {
				551 = {
					is_controlled_by = EGY
					NOT = {
						is_core_of = EGY
					}
					resistance > 20
					compliance < 10
				}
				549 = {
					is_controlled_by = EGY
					NOT = {
						is_core_of = EGY
					}
					resistance > 20
					compliance < 15
				}
			}
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		custom_cost_trigger = {
			has_army_experience > 9
		}

		custom_cost_text = EGY_decision_cost_army_experience

		visible = {
			original_tag = ENG
			EGY = {
				exists = yes
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}

		days_remove = 30

		days_re_enable = 0

		ai_will_do = {
			base = 0
			modifier = {
				add = 5
				has_army_experience > 10
			}
		}

		complete_effect = {
			army_experience = -10
		}
		
	
		remove_effect = {
			EGY_british_treaty_influence_low_increase_effect = yes
			random_state = {
				limit = {
					is_core_of = SUD
					is_controlled_by = EGY
					resistance > 20
					compliance < 10
				}
				add_resistance = -0.05
				add_compliance = -0.02
			}
		}
	}
}
EGY_organise_nationalist_factions = {

	EGY_civil_war_countdown_timer = {

		icon = GFX_decision_generic_ignite_civil_war

		priority = 3

		days_mission_timeout = 3 # 120

		available = {
			has_government = fascism
		}

		visible = {
			original_tag = EGY
			has_civil_war = no
			NOT = {
				has_country_flag = EGY_fascist_civil_war_start
			}
		}

		activation = {
			has_completed_focus = EGY_revolt_against_the_opressors
		}

		fire_only_once = yes

		cancel_if_not_visible = yes

		is_good = no
		
		timeout_effect = {
			set_country_flag = EGY_fascist_civil_war_start
			clr_country_flag = EGY_in_regency
			remove_country_leader_role = {
				character = EGY_farouk_i
				ideology = absolute_monarchism
			}
			add_country_leader_role = {
				character = EGY_aziz_ezzat
				promote_leader = yes
				country_leader = {
					ideology = oligarchism
					expire = "1965.1.1.1"
				}
			}
			hidden_effect = {
				446 = {
					create_unit = {
                    	division = "name = \"Thawrat Alfursan\" division_template = \"Firqat Alfursan\" start_experience_factor = 0.1 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_0 = { owner = EGY } }"
                    	owner = EGY
                	}
					create_unit = {
                    	division = "name = \"Mushat Althawra\" division_template = \"Firqat Alfursan\" start_experience_factor = 0.1 start_equipment_factor = 0.5 force_equipment_variants = { infantry_equipment_0 = { owner = EGY } }"
                    	owner = EGY
                	}
					create_unit = {
                    	division = "name = \"Mushat Althawra\" division_template = \"Firqat Mushaa\" start_experience_factor = 0.1 start_equipment_factor = 0.5 force_equipment_variants = { infantry_equipment_0 = { owner = EGY } }"
                    	owner = EGY
                	}
					create_unit = {
                    	division = "name = \"Mushat Althawra\" division_template = \"Firqat Mushaa\" start_experience_factor = 0.1 start_equipment_factor = 0.5 force_equipment_variants = { infantry_equipment_0 = { owner = EGY } }"
                    	owner = EGY
                	}
				}
				447 = {
					create_unit = {
                    	division = "name = \"Thawrat Alfursan\" division_template = \"Firqat Alfursan\" start_experience_factor = 0.1 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_0 = { owner = EGY } }"
                    	owner = EGY
                	}
					create_unit = {
                    	division = "name = \"Mushat Althawra\" division_template = \"Firqat Mushaa\" start_experience_factor = 0.1 start_equipment_factor = 0.5 force_equipment_variants = { infantry_equipment_0 = { owner = EGY } }"
                    	owner = EGY
                	}
				}
			}
			if = {
				limit = {
					fascism < 20
				}
                start_civil_war = {
                    ruling_party = fascism
                    ideology = neutrality
                    size = 0.75
					capital = 447
                    keep_unit_leaders = {
                        6982 6983 6984 6985 6986 6988
                    }
                }
            }
			else_if = {
				limit = {
					OR = {
						fascism > 20
						fascism < 50
					}
				}
                start_civil_war = {
                    ruling_party = fascism
                    ideology = neutrality
                    size = 0.6
					capital = 447
                    keep_unit_leaders = {
                        6982 6983 6984 6985 6986 6988
                    }
                }
			}
			else_if = {
				limit = {
					fascism > 50
				}
				start_civil_war = {
					ruling_party = fascism
					ideology = neutrality
					size = 0.4
					keep_unit_leaders = {
						6982 6983 6984 6985 6986 6988
					}
				}
			}
			if = {
				limit = {
					has_completed_focus = EGY_rally_the_green_shirts
				}
				division_template = {
                	name = "Qumsan Khadra'"
                	priority = 0
                	regiments = {
                    	infantry = { x = 0 y = 0 }
                    	infantry = { x = 0 y = 1 }
                    	infantry = { x = 1 y = 0 }
                    	infantry = { x = 1 y = 1 }
						infantry = { x = 2 y = 0 }
                    	infantry = { x = 2 y = 1 }
                	}
            	}
            	446 = {
               		create_unit = {
                    	division = "name = \"2a Shuebat Alqumsan Alkhadra'\" division_template = \"Qumsan Khadra'\" start_experience_factor = 0.1 start_equipment_factor = 0.5 force_equipment_variants = { infantry_equipment_0 = { owner = EGY } }"
                    	owner = EGY
                	}
					create_unit = {
                    	division = "name = \"2a Shuebat Alqumsan Alkhadra'\" division_template = \"Qumsan Khadra'\" start_experience_factor = 0.1 start_equipment_factor = 0.5 force_equipment_variants = { infantry_equipment_0 = { owner = EGY } }"
                    	owner = EGY
                	}
					create_unit = {
                    	division = "name = \"3a Shuebat Alqumsan Alkhadra'\" division_template = \"Qumsan Khadra'\" start_experience_factor = 0.1 start_equipment_factor = 0.5 force_equipment_variants = { infantry_equipment_0 = { owner = EGY } }"
                    	owner = EGY
                	}
            	}
            }
		}
	}
	EGY_assassinate_ahmad_maher_pasha = { 

		icon = GFX_decision_generic_assassination

		visible = {
			has_completed_focus = EGY_revolt_against_the_opressors
			original_tag = EGY
			has_civil_war = no
			NOT = {
				has_country_flag = EGY_fascist_civil_war_start
			}
		}

		cost = 100

		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				fascism < 0.25
			}
			modifier = {
				add = -10
				has_stability < 0.3
			}
		}

		complete_effect = {
			retire_character = EGY_ahmad_maher_pasha
			add_stability = -0.05
			add_popularity = {
                ideology = fascism
                popularity = 0.1
            }
		}
	}
	EGY_guns_for_the_cause = { 

		icon = GFX_decision_generic_prepare_civil_war

		visible = {
			has_completed_focus = EGY_revolt_against_the_opressors
			original_tag = EGY
			has_civil_war = no
			NOT = {
				has_country_flag = EGY_fascist_civil_war_start
			}
		}

		days_remove = 30

		days_re_enable = 5

		ai_will_do = {
			base = 5
			modifier = {
				add = 10
				fascism < 0.2
			}
			modifier = {
				add = -10
				has_stability < 0.3
			}
		}

		remove_effect = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 200
				producer = EGY
			}
		}
	
		complete_effect = {
			add_stability = -0.01
			add_popularity = {
                ideology = fascism
                popularity = 0.03
            }
		}
	}
}

EGY_inpending_sudanese_uprising = {
	
	EGY_guns_for_the_cause = { 

		icon = GFX_decision_generic_prepare_civil_war

		visible = {
			has_completed_focus = EGY_revolt_against_the_opressors
			original_tag = EGY
			has_civil_war = no
			NOT = {
				has_country_flag = EGY_fascist_civil_war_start
			}
		}

		days_remove = 30

		days_re_enable = 5

		ai_will_do = {
			base = 5
			modifier = {
				add = 10
				fascism < 0.2
			}
			modifier = {
				add = -10
				has_stability < 0.3
			}
		}

		remove_effect = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 300
				producer = EGY
			}
		}
	
		complete_effect = {
			add_stability = -0.01
			add_popularity = {
                ideology = fascism
                popularity = 0.05
            }
		}
	}
	
}


