on_actions = {
	on_state_control_changed = {	#aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa why doesnt it work aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
		effect = {
			FROM.FROM = {
				if = {
					limit = {
						is_in_array = {
							array = GLOBAL.r56_sa_muslim_states
							value = THIS
						}
					}
					sa_remove_modifiers = yes
					sa_assign_muslim = yes
				}
				else_if = {
					limit = {
						is_in_array = {
							array = GLOBAL.r56_sa_hindu_states
							value = THIS
						}
					}
					sa_remove_modifiers = yes
					sa_assign_hindu = yes
				}
				else_if = {
					limit = {
						is_in_array = {
							array = GLOBAL.r56_sa_buddhist_states
							value = THIS
						}
					}
					sa_remove_modifiers = yes
					sa_assign_buddhist = yes
				}
				else_if = {
					limit = {
						is_in_array = {
							array = GLOBAL.r56_other_states
							value = THIS
						}
					}
					sa_assign_other = yes
				}
			}
		}
	}

	on_startup = {
		effect = {
			# sri lankan tamil state if added

			# move to history file for dynamic tags #

			#every_country = {	#hindu
			#	limit = {
			#		OR = {
			#			tag = NEP
			#			tag = RAJ
			#		}
			#	}
			#	
			#	every_state = {	#hindu
			#		limit = {
			#			OR = {
			#				state = 640
			#				state = 439
			#				state = 431
			#				state = 435
			#			}
			#		}
			#		add_to_array = { PREV.slight_minority_states = THIS }	
			#	}
			#}

			#every_country = {	#muslim
			#	limit = {
			#		OR = {
			#			tag = PAK
			#			tag = BAN
			#			tag = HYD
			#			tag = MLD
			#		}
			#	}
			#	every_state = {	#hindu
			#		limit = {
			#			OR = {
			#				state = 430
			#				state = 441
			#				state = 440
			#			}
			#		}
			#		add_to_array = { PREV.slight_minority_states = THIS }	
			#	}
			#}
		
			#every_country = {	#buddhist
			#	limit = {
			#		OR = {
			#			tag = SRL
			#			tag = BRM
			#			tag = BHU
			#		}
			#	}
			#	add_to_array = { slight_minority_states = 324 }
			#}

			# https://upload.wikimedia.org/wikipedia/commons/5/50/Muslim_percent_1909.jpg
			# https://upload.wikimedia.org/wikipedia/commons/2/24/Hindu_percent_1909.jpg
			# https://upload.wikimedia.org/wikipedia/commons/3/3c/Sikhs_buddhists_jains_percent1909.jpg

			# on actions check for state control change and assign the modifiers (one for core, one for occupied) according to the above states and state religion (hindus+sikhs?)

			
			every_state = {	#muslims
				limit = {
					OR = {
						state = 443
						state = 444
						state = 445
						state = 440
						state = 442
						state = 787
						state = 430
						state = 441
						state = 281
					}
				}
				add_to_array = { GLOBAL.r56_sa_muslim_states = THIS }	
				CONTROLLER = {
					PREV = {
						sa_assign_muslim = yes
					}
				}
			}
			
			every_state = {	#christian / melting pot
				limit = {
					OR = {
						state = 434
						state = 432
						state = 321
						state = 733
					}
				}
				add_to_array = { GLOBAL.r56_sa_other_states = THIS }	
				CONTROLLER = {
					PREV = {
						sa_assign_other = yes
					}
				}
			}

			every_state = {	#christian / melting pot
				limit = {
					OR = {
						state = 288
						state = 640
						state = 422
						state = 324
					}
				}
				add_to_array = { GLOBAL.r56_sa_buddhist_states = THIS }		
				CONTROLLER = {
					PREV = {
						sa_assign_buddhist = yes
					}
				}
			}

			every_state = {	#hindu
				limit = {
					OR = {
						state = 428
						state = 433
						state = 439
						state = 437
						state = 438
						state = 435
						state = 436
						state = 431
						state = 426
						state = 427
						state = 429
						state = 425
						state = 424
						state = 423
						state = 320
						state = 323
					}
				}
				add_to_array = { GLOBAL.r56_sa_hindu_states = THIS }	
				CONTROLLER = {
					PREV = {
						sa_assign_hindu = yes
					}
				}
			}
		}
	}
}