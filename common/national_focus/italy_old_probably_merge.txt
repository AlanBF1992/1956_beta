######
# ITALIAN FOCUS TREE BY BLUEFOXY ET AL
######
focus_tree = {
	id = italian_focus
	country = {
		factor = 0
		modifier = {
			add = 0	#used for checking and adjusting
			tag = YUG	#ITA
		}
	}
	default = no
	continuous_focus_position = { x = 1700 y = 700 }
	
	# no musolini larp this time pal

	focus = {
		id = ITA_royal_intervention
		icon = GFX_goal_italy_end_the_army_corruption
		x = 70
		y = 0
		cost = 10
		mutually_exclusive = {
			focus = ITA_the_stab_in_the_back
		}
		available_if_capitulated = yes
		available = {
			
		}
		bypass = {
			NOT = {
				has_government = fascism
			}
		}
		ai_will_do = {
			factor = 5
		}
		completion_reward = {
			#Needs news events to end the civil war now - Thinking_waffle
			custom_effect_tooltip = ITA_royal_intervention_tt
			hidden_effect = {
				set_country_flag = ITA_royal_intervention_flag
				set_global_flag = ITA_royal_intervention_global_flag
				
				#enables non fascist planes
				set_cosmetic_tag = ITA_anti_fascist				
				if = {
					limit = {
						has_idea = alfredo_guzzoni
					}
					remove_ideas = alfredo_guzzoni
				}
				if = {
					limit = {
						has_idea = rodolfo_graziani
					}
					remove_ideas = rodolfo_graziani
				}
				736 = {
					add_core_of = SLV
				}
				if = {
					limit = {
						ITA = {
							has_full_control_of_state = 736
						}
						ITA = {
							owns_state = 736
						}
						SLV = {
							exists = no
						}
					}
					release = SLV
					SLV = {
						add_manpower = 1000
						load_oob = "r56_ITA_Civil_War_SLV_Milita"
						add_political_power = 300
						set_politics = {
							ruling_party = neutrality
						}
						set_popularities = {
							democratic = 23
							neutrality = 50
							fascism = 25
							communism = 2
						}
						if = {
							limit = {
								has_idea = partial_economic_mobilisation
							}
							swap_ideas = {
								remove_idea = partial_economic_mobilisation
								add_idea = war_economy
							}
						}
						if = {
							limit = {
								has_idea = low_economic_mobilisation
							}
							swap_ideas = {
								remove_idea = low_economic_mobilisation
								add_idea = war_economy
							}
						}
						if = {
							limit = {
								has_idea = civilian_economy
							}
							swap_ideas = {
								remove_idea = civilian_economy
								add_idea = war_economy
							}
						}
					}
					set_country_flag = ITA_SLV_released
					set_global_flag = ITA_SLV_released_global
				}
				add_country_leader_role = {
					character = ITA_liberation_junta
					promote_leader = yes
					country_leader = {
					  	ideology = oligarchism
					  	expire = "1965.1.1"
					  	traits = { emigre_connections r56_trait_opposed_to_fascism }
					}
				}
				set_party_name = { 
					ideology = neutrality 
					long_name = "Giunta di Liberazione Nazionale"
					name = "Giunta di Liberazione Nazionale"
				}
				start_civil_war = {
					ruling_party = neutrality
					ideology = fascism
					size = 0.5
					capital = 159
					states = {
						158
						161
						159
						160
						39
						161
					}
				}
				if = {
					limit = {
						has_global_flag = ITA_SLV_released_global
					}
					SLV = {
						declare_war_on = {
							target = ITA
							type = topple_government
						}
					}
				}
				load_oob = "r56_ITA_Civil_War_loyalist"
				random_other_country = {
					limit = {
						original_tag = ITA
						has_government = fascism
					}
					set_equipment_fraction = 0.5
					set_stability = 0.9
					set_war_support = 0.9
					load_oob = "r56_ITA_Civil_War_black_shirts"
					#identify them with tag = RSI for Repubblica Sociale Italiana
					set_country_flag = ITA_italian_social_republic_flag
					set_cosmetic_tag = ITA_RSI_fascism
				}
				random_other_country = {
					limit = {
						original_tag = ITA
						has_government = fascism
					}
					#Oh Ship	
					transfer_navy = {
						target = ITA
					}
					load_focus_tree = {
						tree = italian_focus
						keep_completed = no
					}
					complete_national_focus = ITA_the_stab_in_the_back
					set_country_flag = ITA_royal_intervention_other
					if = {
						limit = {
							original_tag = ITA
							has_global_flag = ITA_SLV_released_global
						}
						declare_war_on = {
							target = SLV
							type = annex_everything
						}
					}
					if = {
						limit = {
							has_war_with = ETH
						}
						white_peace = {
							tag = ETH
						}
					}
					save_event_target_as = fascist_italy_civil_war
					every_unit_leader = {
						set_nationality = ITA
					}
					create_corps_commander = {
						name = "Mario Soldarelli"
						picture = "r56_portrait_ITA_generic_land_1.dds"
						traits = {
							politically_connected
						}
						skill = 1
						id = 679
						attack_skill = 1
						defense_skill = 1
						planning_skill = 1
						logistics_skill = 1
					}
					create_navy_leader = {
						name = "Junio Borghese"						#Black Prince 
						picture = "Portrait_Italy_Generic_land_4.dds"
						traits = {
							navy_career_officer
						}
						skill = 1
						id = 678
						attack_skill = 1
						defense_skill = 1
						maneuvering_skill = 1
						coordination_skill = 1
					}
				}
				ITA = {
					every_unit_leader = {
						limit = {
							OR = {
								has_id = 687
								has_id = 686
								has_id = 679
								has_id = 678
								#No one likes Mussolini :(
							}
						}
						set_nationality = event_target:fascist_italy_civil_war
					}
				}
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
				}
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
				add_popularity = {
					ideology = democratic
					popularity = 0.3
				}
				add_popularity = {
					ideology = neutrality
					popularity = 0.4
				}
				add_popularity = {
					ideology = fascism
					popularity = 0.05
				}
				set_stability = 0.9
				set_war_support = 0.8
				news_event = { id = r56.news_event.26 days = 1 random_days = 2 }
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION FOCUS_FILTER_INDUSTRY FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER }
	}
	focus = {
		id = ITA_rebuild_the_north
		icon = GFX_goal_generic_construct_civilian
		cost = 7.2
		prerequisite = {
			focus = ITA_empower_the_monarchists
			focus = ITA_strengthen_the_coalition
		}
		ai_will_do = {
			factor = 10
		}
		relative_position_id = ITA_royal_intervention
		x = 0
		y = 2
		available = {
			has_war = no
		}
		completion_reward = {
			add_stability = 0.05
			add_timed_idea = {
				idea = ITA_rebuild_the_north_idea
				days = 365
			}
		}
		search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = ITA_reopen_the_markets
		icon = GFX_goal_generic_positive_trade_relations
		cost = 5
		prerequisite = {
			focus = ITA_rebuild_the_north
		}
		ai_will_do = {
			factor = 10
		}
		relative_position_id = ITA_rebuild_the_north
		x = 0
		y = 1
		available = {
			OR = {
				has_government = neutrality
				has_government = democratic
			}
		}
		completion_reward = {
			if = {
				limit = {
					NOT = {
						OR = {
							has_idea = free_trade
							has_idea = export_focus
						}
					}
				}
				add_ideas = export_focus
			}

			add_ideas = ITA_reopen_the_markets_idea
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	# monarchist

	focus = {
		id = ITA_empower_the_monarchists
		icon = GFX_goal_ITA_victor_emmanuel_III
		cost = 5
		prerequisite = {
			focus = ITA_royal_intervention
		}
		mutually_exclusive = {
			focus = ITA_strengthen_the_coalition
		}
		ai_will_do = {
			factor = 10
		}
		relative_position_id = ITA_royal_intervention
		x = -4
		y = 1
		completion_reward = {
			country_event = { id = r56_italy.107 hours = 6 }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	focus = {
		id = ITA_secure_control_over_parliament
		icon = GFX_goal_generic_election_rigged
		cost = 10
		prerequisite = {
			focus = ITA_empower_the_monarchists
		}
		mutually_exclusive = {
			focus = ITA_restore_the_statuto_albertino
		}
		ai_will_do = {
			factor = 10
		}
		relative_position_id = ITA_empower_the_monarchists
		x = -1
		y = 1
		available = {
			has_civil_war = no
		}
		completion_reward = {
			swap_ruler_traits = {
				remove = soldier_king
				add = soldier_king_2
			}
			add_popularity = {
				ideology = neutrality
				popularity = 0.1
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_ESPIONAGE }
	}
	focus = {
		id = ITA_restore_the_statuto_albertino
		icon = GFX_goal_constitution
		cost = 10
		prerequisite = {
			focus = ITA_empower_the_monarchists
		}
		mutually_exclusive = {
			focus = ITA_secure_control_over_parliament
		}
		ai_will_do = {
			factor = 10
		}
		relative_position_id = ITA_empower_the_monarchists
		x = 1
		y = 1
		available = {
			has_civil_war = no
		}
		completion_reward = {
			add_country_leader_trait = party_appeaser
			add_ideas = ITA_restore_the_statuto_albertino_idea
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = ITA_royal_militarism
		icon = GFX_focus_generic_monarchy_1
		cost = 10
		prerequisite = {
			focus = ITA_secure_control_over_parliament
			focus = ITA_restore_the_statuto_albertino
		}
		ai_will_do = {
			factor = 10
		}
		relative_position_id = ITA_empower_the_monarchists
		x = 0
		y = 2
		available = {
			has_government = neutrality
		}
		completion_reward = {
			add_ideas = ITA_royal_militarism_idea
		}
		search_filters = { FOCUS_FILTER_MANPOWER }
	}
	focus = {
		id = ITA_control_the_industrial_elites
		icon = GFX_goal_generic_state_economy
		cost = 10
		prerequisite = {
			focus = ITA_royal_militarism
		}
		ai_will_do = {
			factor = 10
		}
		relative_position_id = ITA_royal_militarism
		x = 0
		y = 1
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = ITA_luca_esposito
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	# democratic

	focus = {
		id = ITA_strengthen_the_coalition
		icon = GFX_goal_ITA_libertas
		cost = 5
		prerequisite = {
			focus = ITA_royal_intervention
		}
		mutually_exclusive = {
			focus = ITA_empower_the_monarchists
		}
		ai_will_do = {
			factor = 120
		}
		relative_position_id = ITA_royal_intervention
		x = 4
		y = 1
		available = {
			has_civil_war = no
		}
		completion_reward = {
			add_popularity = {
				ideology = democratic
				popularity = 0.1
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = ivanoe_bonomi
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	focus = {
		id = ITA_referendum_on_the_monarchy
		icon = GFX_goal_constitutional_monarchy
		cost = 10
		prerequisite = {
			focus = ITA_strengthen_the_coalition
		}
		ai_will_do = {
			factor = 120
		}
		relative_position_id = ITA_strengthen_the_coalition
		x = 0
		y = 1
		available = {
			democratic > 0.4
		}
		completion_reward = {
			country_event = { id = r56_italy.108 hours = 6 }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	focus = {
		id = ITA_christian_democracy
		icon = GFX_goal_christianity_and_state
		cost = 7.2
		prerequisite = {
			focus = ITA_referendum_on_the_monarchy
		}
		ai_will_do = {
			factor = 120
		}
		relative_position_id = ITA_referendum_on_the_monarchy
		x = 1
		y = 1
		available = {
			has_government = democratic
		}
		completion_reward = {
			add_ideas = ITA_christian_democracy_idea
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = ITA_luigi_sturzo
		}
		search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_MANPOWER FOCUS_FILTER_POLITICAL }
	}
	focus = {
		id = ITA_disband_the_partisans
		icon = GFX_goal_MAN_confront_gorillas
		cost = 10
		prerequisite = {
			focus = ITA_referendum_on_the_monarchy
		}
		ai_will_do = {
			factor = 120
		}
		relative_position_id = ITA_referendum_on_the_monarchy
		x = -1
		y = 1
		available = {
			NOT = {
				has_government = communism
			}
		}
		completion_reward = {
			add_stability = -0.05
			add_popularity = {
				ideology = communism
				popularity = -0.15
			}
			add_equipment_to_stockpile = {
                type = infantry_equipment
                amount = 2500
                producer = ITA
            }
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_MILITARY_EQUIPMENT }
	}
	focus = {
		id = ITA_liberalize_our_industries
		icon = GFX_goal_generic_construct_civ_factory
		cost = 10
		prerequisite = {
			focus = ITA_disband_the_partisans
		}
		prerequisite = {
			focus = ITA_christian_democracy
		}
		ai_will_do = {
			factor = 120
		}
		relative_position_id = ITA_referendum_on_the_monarchy
		x = 0
		y = 2
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			add_ideas = ITA_liberalize_our_industries_idea
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = ITA_restructure_the_divisions
		icon = GFX_goal_italy_restructure_the_divisions
		cost = 5
		x = 42
		y = 0
		ai_will_do = {
			factor = 25
		}
		completion_reward = {
			army_experience = 25
			add_ideas = ITA_restructure_the_divisions
		}
	}
	focus = {
		id = ITA_general_equipment_modernization
		icon = GFX_focus_secret_rearmament
		cost = 10
		prerequisite = {
			focus = ITA_restructure_the_divisions
		}
		x = 34
		y = 1
		ai_will_do = {
			factor = 25
		}
		completion_reward = {
			add_tech_bonus = {
                name = infantry_artillery_bonus
				bonus = 1
				uses = 2
				category = infantry_weapons
			}
			add_tech_bonus = {
                name = infantry_artillery_bonus
				bonus = 1
				uses = 1
				category = artillery
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = ITA_expand_the_elite_forces
		icon = GFX_focus_generic_support_the_left_right
		cost = 10
		prerequisite = {
			focus = ITA_general_equipment_modernization
		}
		x = 32
		y = 2
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			add_ideas = ITA_expand_the_elite_forces
			add_tech_bonus = {
                name = special_forces_bonus
                bonus = 1.0
                uses = 1
                category = r56_special_forces_training_tech 
            }			
		}
	}
	focus = {
		id = ITA_alpini
		icon = GFX_goal_ITA_alpini
		cost = 10
		prerequisite = {
			focus = ITA_expand_the_elite_forces
		}
		x = 31
		y = 3
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			add_tech_bonus = {
                name = special_forces_bonus
				bonus = 1
				uses = 2
				category = r56_mountain_infantry_tech
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = ITA_winter_training_in_finland
		icon = GFX_goal_italy_winter_training_in_finland
		cost = 10
		prerequisite = {
			focus = ITA_alpini
		}
		x = 30
		y = 4
		ai_will_do = {
			factor = 10
		}
		available = {
			FIN = {
				exists = yes
			}
			NOT = {
				OR = {
					has_war_with = FIN
					any_country = {
						is_in_faction_with = ITA
						has_war_with = FIN
					}
				}
				
			}
			OR = {
				FIN = {
					has_war = yes
				}
				date > 1940.01.01
			}
		}
		completion_reward = {
			add_ideas = ITA_winter_training_in_finland
            add_tech_bonus = {
                name = infantry_artillery_bonus
                bonus = 1
                uses = 2
                category = winter_clothing_tech
            }			
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = ITA_reorganize_the_unpa
		icon = GFX_goal_italy_unpa
		cost = 10
		prerequisite = {
			focus = ITA_expand_the_elite_forces
		}
		x = 32
		y = 4
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			add_ideas = ITA_reorganize_the_unpa
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = ITA_the_new_arditi
		icon = GFX_goal_ITA_arditi
		cost = 10
		prerequisite = {
			focus = ITA_expand_the_elite_forces
		}
		x = 33
		y = 3
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			add_tech_bonus = {
				name = special_forces_bonus
				bonus = 1
				uses = 2
				category = r56_shock_infantry_tech
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = ITA_cannone_da_47_32
		icon = GFX_goal_generic_build_tank
		cost = 10
		prerequisite = {
			focus = ITA_general_equipment_modernization
		}
		x = 34
		y = 2
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			add_tech_bonus = {
				name = artillery_tech_bonus_name
				bonus = 1
				uses = 2
				category = cat_anti_tank
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = ITA_carro_armato
		icon = GFX_ITA_tank
		cost = 10
		prerequisite = {
			focus = ITA_cannone_da_47_32
		}
		x = 34
		y = 4
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			add_tech_bonus = {
				name = armor_bonus
				bonus = 1
				uses = 1
				category = cat_heavy_armor
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = ITA_review_the_military_budget
		icon = GFX_focus_research
		cost = 10
		prerequisite = {
			focus = ITA_alpini
			focus = ITA_reorganize_the_unpa
			focus = ITA_the_new_arditi
			focus = ITA_carro_armato
		}
		x = 33
		y = 5
		ai_will_do = {
			factor = 500
		}
		available = {
			amount_research_slots < 6
		}
		completion_reward = {
			add_research_slot = 1
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = ITA_spa_as_37
		icon = GFX_goal_generic_army_motorized
		cost = 10
		prerequisite = {
			focus = ITA_cannone_da_47_32
		}
		x = 35
		y = 3
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			add_tech_bonus = {
				name = armor_bonus
				bonus = 1
				uses = 1
				category = motorized_equipment
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = ITA_the_backbone_of_the_party
		icon = GFX_goal_italy_the_backbone_of_the_party
		cost = 10
		prerequisite = {
			focus = ITA_restructure_the_divisions
		}
		mutually_exclusive = {
			focus = ITA_end_the_army_corruption
		}
		available = {
			OR = {
				has_government = fascism
				has_government = neutrality
			}
		}
		x = 39
		y = 1
		ai_will_do = {
			factor = 30
			modifier = {
				has_war = yes
				factor = 5
			}			
		}
		completion_reward = {
			swap_ideas = {
				remove_idea = ITA_bloated_military_bureaucracy
				add_idea = ITA_the_backbone_of_the_party
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	focus = {
		id = ITA_adapt_great_war_tactics
		icon = GFX_goal_italy_adapt_great_war_tactics
		cost = 10
		prerequisite = {
			focus = ITA_the_backbone_of_the_party
		}
		x = 38
		y = 2
		ai_will_do = {
			factor = 10
			modifier = {
				has_war = yes
				factor = 5
			}			
		}
		completion_reward = {
			swap_ideas = {
				remove_idea = ITA_the_backbone_of_the_party
				add_idea = ITA_the_backbone_of_the_party_2
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	focus = {
		id = ITA_high_command_loyalty
		icon = GFX_goal_generic_dangerous_deal
		cost = 5
		prerequisite = {
			focus = ITA_adapt_great_war_tactics
		}
		x = 37
		y = 3
		ai_will_do = {
			factor = 10
			modifier = {
				has_war = yes
				factor = 3
			}			
		}
		completion_reward = {
			every_unit_leader = {
				add_logistics = 1
			}
			add_ideas = ABC_modern_logistics_idea
		}
	}
	focus = {
		id = ITA_focus_on_mobilization
		icon = GFX_goal_italy_focus_on_mass_mobilization
		cost = 10
		prerequisite = {
			focus = ITA_adapt_great_war_tactics
		}
		x = 38
		y = 4
		ai_will_do = {
			factor = 10
			modifier = {
				has_war = yes
				factor = 3
			}			
		}
		completion_reward = {
			add_ideas = ITA_focus_on_mobilization
		}
		search_filters = { FOCUS_FILTER_MANPOWER }
	}
	focus = {
		id = ITA_end_the_army_corruption
		icon = GFX_goal_demand_sudetenland
		cost = 10
		prerequisite = {
			focus = ITA_restructure_the_divisions
		}
		mutually_exclusive = {
			focus = ITA_the_backbone_of_the_party
		}
		x = 45
		y = 1
		ai_will_do = {
			factor = 6
			modifier = {
				has_war = yes
				factor = 2
			}
			modifier = {
				OR = {
					has_government = democratic
					has_government = communism
				}
				factor = 8
			}						
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
		completion_reward = {
			swap_ideas = {
				remove_idea = ITA_bloated_military_bureaucracy
				add_idea = ITA_bloated_military_bureaucracy_end_corruption
			}
		}
	}
	focus = {
		id = ITA_appoint_messe_2
		icon = GFX_goal_italy_messe_plan
		cost = 10
		prerequisite = {
			focus = ITA_the_backbone_of_the_party
			focus = ITA_end_the_army_corruption
		}
		mutually_exclusive = {
			focus = ITA_follow_pariani_plan
			focus = ITA_expand_the_comando_supremo
		}
		available = {
			has_tech = mobile_warfare
		}
		x = 40
		y = 2
		ai_will_do = {
			factor = 10
			modifier = {
				has_war = yes
				factor = 2
			}			
		}
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 0.5
				uses = 2
				category = cat_mobile_warfare
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = ITA_war_of_rapid_decision
		icon = GFX_goal_generic_cavalry
		cost = 10
		prerequisite = {
			focus = ITA_appoint_messe_2
		}
		x = 40
		y = 3
		ai_will_do = {
			factor = 10
			modifier = {
				has_war = yes
				factor = 2
			}			
		}
		completion_reward = {
			add_ideas = ITA_war_of_rapid_decision
		}
	}
	focus = {
		id = ITA_resolve_the_automobile_gap
		icon = GFX_goal_generic_army_motorized
		cost = 10
		prerequisite = {
			focus = ITA_war_of_rapid_decision
		}
		x = 40
		y = 4
		ai_will_do = {
			factor = 10
			modifier = {
				has_war = yes
				factor = 2
			}
		}
		completion_reward = {
			add_ideas = ITA_resolve_the_automobile_gap
		}
	}
	focus = {
		id = ITA_follow_pariani_plan
		icon = GFX_goal_generic_occupy_start_war
		cost = 10
		prerequisite = {
			focus = ITA_the_backbone_of_the_party
			focus = ITA_end_the_army_corruption
		}
		mutually_exclusive = {
			focus = ITA_expand_the_comando_supremo
			focus = ITA_appoint_messe_2
		}
		available = {
			has_tech = superior_firepower
		}
		x = 42
		y = 2
		ai_will_do = {
			factor = 10
			modifier = {
				has_war = yes
				factor = 3
			}			
		}
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 0.5
				uses = 2
				category = cat_superior_firepower
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = ITA_maintain_the_three_branches_independence
		icon = GFX_focus_generic_license_production
		cost = 10
		prerequisite = {
			focus = ITA_follow_pariani_plan
		}
		x = 42
		y = 3
		ai_will_do = {
			factor = 10
			modifier = {
				has_war = yes
				factor = 2
			}			
		}
		completion_reward = {
			add_ideas = ITA_maintain_the_three_branches_independence
		}
	}
	focus = {
		id = ITA_focus_on_firepower
		icon = GFX_goal_generic_army_artillery2
		cost = 10
		prerequisite = {
			focus = ITA_maintain_the_three_branches_independence
		}
		x = 42
		y = 4
		ai_will_do = {
			factor = 10
			modifier = {
				has_war = yes
				factor = 2
			}			
		}
		completion_reward = {
			add_ideas = ITA_focus_on_firepower
		}
	}
	focus = {
		id = ITA_expand_the_comando_supremo
		icon = GFX_focus_generic_military_mission
		cost = 10
		prerequisite = {
			focus = ITA_the_backbone_of_the_party
			focus = ITA_end_the_army_corruption
		}
		mutually_exclusive = {
			focus = ITA_follow_pariani_plan
			focus = ITA_appoint_messe_2
		}
		available = {
			has_tech = trench_warfare
		}
		x = 44
		y = 2
		#was supposed to not be picked but as Italy begins with trench warfare it means that they would pick the wrong path every time
		ai_will_do = {
			factor = 16
			modifier = {
				has_war = yes
				factor = 3
			}			
			#modifier = {
			#	is_historical_focus_on = yes
			#	factor = 0
			#}
		}
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 0.5
				uses = 2
				category = cat_grand_battle_plan
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = ITA_war_of_positions
		icon = GFX_goal_generic_army_doctrines
		cost = 10
		prerequisite = {
			focus = ITA_expand_the_comando_supremo
		}
		x = 44
		y = 3
		ai_will_do = {
			factor = 10
			modifier = {
				has_war = yes
				factor = 2
			}				
		}
		completion_reward = {
			add_ideas = ITA_war_of_positions
		}
	}
	focus = {
		id = ITA_increase_the_number_of_nco
		icon = GFX_focus_generic_military_academy
		cost = 10
		prerequisite = {
			focus = ITA_war_of_positions
		}
		x = 44
		y = 4
		ai_will_do = {
			factor = 10
			modifier = {
				has_war = yes
				factor = 2
			}			
		}
		completion_reward = {
			add_ideas = ITA_increase_the_number_of_nco
		}
	}
	focus = {
		id = ITA_further_doctrinal_innovation
		icon = GFX_goal_generic_military_deal
		cost = 10
		prerequisite = {
			focus = ITA_resolve_the_automobile_gap
			focus = ITA_focus_on_firepower
			focus = ITA_increase_the_number_of_nco
		}
		x = 42
		y = 5
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = ITA_reshuffle_the_officer_corps
		icon = GFX_focus_generic_military_academy
		cost = 10
		prerequisite = {
			focus = ITA_end_the_army_corruption
		}
		x = 46
		y = 2
		ai_will_do = {
			factor = 10
			modifier = {
				has_war = yes
				factor = 3
			}				
		}
		completion_reward = {
			remove_ideas = ITA_bloated_military_bureaucracy_end_corruption
		}
	}
	focus = {
		id = ITA_study_the_spanish_civil_war
		icon = GFX_goal_generic_spanish_civil_war_soldier
		cost = 10
		prerequisite = {
			focus = ITA_reshuffle_the_officer_corps
		}
		x = 46
		y = 4
		ai_will_do = {
			factor = 10
			modifier = {
				has_war = yes
				factor = 2
			}				
		}
		completion_reward = {
			add_ideas = ITA_fresh_doctrines
		}
		search_filters = { FOCUS_FILTER_SPA_CIVIL_WAR }
	}
	focus = {
		id = ITA_question_the_high_command
		icon = GFX_goal_italy_question_the_high_command
		cost = 10
		prerequisite = {
			focus = ITA_reshuffle_the_officer_corps
		}
		x = 47
		y = 3
		ai_will_do = {
			factor = 10
			modifier = {
				has_war = yes
				factor = 3
			}				
		}
		completion_reward = {
			every_unit_leader = {
				add_attack = 1
			}
		}
	}
	focus = {
		id = ITA_extend_officers_autonomy
		icon = GFX_goal_generic_more_territorial_claims
		cost = 10
		prerequisite = {
			focus = ITA_study_the_spanish_civil_war
		}
		prerequisite = {
			focus = ITA_question_the_high_command
		}
		x = 47
		y = 5
		ai_will_do = {
			factor = 10
			modifier = {
				has_war = yes
				factor = 3
			}				
		}
		completion_reward = {
			add_ideas = ITA_extend_officers_autonomy
		}
	}

	# fascism

	focus = {
		id = ITA_the_stab_in_the_back
		icon = GFX_focus_generic_italy_first
		cost = 5
		mutually_exclusive = {
			focus = ITA_royal_intervention
		}
		available = {
			has_government = fascism
			271 = {
				is_controlled_by_ROOT_or_subject = yes
			}
		}
		x = 58
		y = 0
		ai_will_do = {
			factor = 10
			modifier = {
				add = 90
				is_historical_focus_on = yes
			}
		}
		completion_reward = {
			add_ideas = vittoria_mutilata
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = carlo_scorza
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}
	focus = {
		id = ITA_second_risorgimento
		icon = GFX_focus_attack_italy
		cost = 5
		prerequisite = {
			focus = ITA_the_stab_in_the_back
		}
		relative_position_id = ITA_the_stab_in_the_back
		x = 2
		y = 2
		ai_will_do = {
			factor = 50
		}
		available = {
			NOT = {
				has_war_with = ETH
			}
			has_army_manpower = {
				size > 299999
			}
			has_civil_war = no
			threat > 0.1	
			is_subject = no
			NOT = {
				owns_state = 160
				owns_state = 117
				owns_state = 156
				owns_state = 115
				owns_state = 114	
			}
			r56_script_i_am_sane = yes
		}
		allow_branch = {
			OR = {
				has_game_rule = {
					rule = ita_fragmentation_status
					option = ITA_FRAGMENTED_SERENISSIMA
				}
				has_game_rule = {
					rule = ita_fragmentation_status
					option = ITA_FRAGMENTED_SERENISSIMA_TWO_SICILES
				}
				has_game_rule = {
					rule = ita_fragmentation_status
					option = ITA_FRAGMENTED
				}
				has_game_rule = {
					rule = ita_fragmentation_status
					option = ITA_FRAGMENTED_NEAPOLITAN_SICILY
				}
				has_game_rule = {
					rule = spr_fragmentation_status
					option = SPR_15TH_CENTURY_ARAGON
				}
				has_game_rule = {
					rule = spr_fragmentation_status
					option = SPR_EU4
				}											
												
			}
			NOT = {
				owns_state = 160
				owns_state = 117
				owns_state = 156
				owns_state = 115
				owns_state = 114	
			}
		}

		completion_reward = {
			add_threat = 5
			160 = {
				OWNER = {
					ROOT = {
						create_wargoal = {
							target = PREV
							expire = 0
							type = take_state_focus
							generator = { 160 }
						}
						add_ai_strategy = {
							type = conquer
							id = PREV
							value = 20
						}
					}
				}
			}
			117 = {
				OWNER = {
					ROOT = {
						create_wargoal = {
							target = PREV
							expire = 0
							type = take_state_focus
							generator = { 117 }
						}
					}
				}
			}
			114 = {
				OWNER = {
					ROOT = {
						create_wargoal = {
							target = PREV
							expire = 0
							type = take_state_focus
							generator = { 114 }
						}
					}
				}
			}				
			115 = {
				OWNER = {
					ROOT = {
						create_wargoal = {
							target = PREV
							expire = 0
							type = take_state_focus
							generator = { 115 }
						}
					}
				}
			}
			156 = {
				OWNER = {
					ROOT = {
						create_wargoal = {
							target = PREV
							expire = 0
							type = take_state_focus
							generator = { 156 }
						}
					}
				}
			}								
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}
	focus = {
		id = ITA_mobilize_womens
		icon = GFX_goal_womens_rights2
		cost = 10
		prerequisite = {
			focus = ITA_the_stab_in_the_back
		}
		relative_position_id = ITA_the_stab_in_the_back
		x = -2
		y = 1
		ai_will_do = {
			factor = 55
		}
		completion_reward = {
			add_ideas = ITA_mobilize_womens
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = ITA_expand_ond_membership
		icon = GFX_goal_italy_ond
		cost = 5
		prerequisite = {
			focus = ITA_mobilize_womens
		}
		relative_position_id = ITA_mobilize_womens
		x = 0
		y = 1
		ai_will_do = {
			factor = 35
		}
		completion_reward = {
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}
			add_ideas = ITA_expand_ond_membership
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = ITA_revive_the_opera_nazionale_balilla
		icon = GFX_goal_small_infantry
		cost = 5
		prerequisite = {
			focus = ITA_expand_ond_membership
		}
		relative_position_id = ITA_mobilize_womens
		x = 0
		y = 2
		ai_will_do = {
			factor = 35
		}
		completion_reward = {
			add_ideas = ITA_opera_nazionale_balilla_idea
		}
		search_filters = { FOCUS_FILTER_MANPOWER }
	}
	focus = {
		id = ITA_move_toward_autarky
		icon = GFX_goal_italy_autarky
		cost = 5
		prerequisite = {
			focus = ITA_the_stab_in_the_back
		}
		relative_position_id = ITA_the_stab_in_the_back
		x = 2
		y = 1
		ai_will_do = {
			factor = 75
		}
		completion_reward = {
			add_ideas = ITA_move_toward_autarky
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = ITA_increase_wheat_production
		icon = GFX_goal_generic_wheat
		cost = 5
		prerequisite = {
			focus = ITA_move_toward_autarky
		}
		relative_position_id = ITA_move_toward_autarky
		x = 1
		y = 1
		ai_will_do = {
			factor = 75
		}
		completion_reward = {
			add_ideas = ITA_increase_wheat_production
		}
		search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_WAR_SUPPORT }
	}
	focus = {
		id = ITA_nationalize_the_banking_sector
		icon = GFX_goal_italy_nationalize_the_banks
		cost = 10
		prerequisite = {
			focus = ITA_move_toward_autarky
		}
		prerequisite = {
			focus = ITA_increase_wheat_production
		}
		relative_position_id = ITA_move_toward_autarky
		x = 0
		y = 2
		ai_will_do = {
			factor = 50
		}
		completion_reward = {
			add_ideas = ITA_nationalize_the_banking_sector
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = ITA_expand_the_OVRA
		icon = GFX_goal_generic_secret_police
		cost = 10
		prerequisite = {
			focus = ITA_the_stab_in_the_back
		}
		relative_position_id = ITA_the_stab_in_the_back
		x = 0
		y = 1
		ai_will_do = {
			factor = 75
		}
		completion_reward = {
			add_tech_bonus = {
				bonus = 1
				uses = 1
				category = military_police_tech
			}
			if = {
                limit = {
                    has_dlc = "La Resistance"
                    NOT = {
                        has_intelligence_agency = yes
                    }
                }
                create_intelligence_agency = yes
            }
			if = {
                limit = {
                    has_dlc = "La Resistance"
                }
                upgrade_intelligence_agency = upgrade_anti_partisan
            }
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = ITA_pietro_koch
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = ITA_leave_the_league_of_nations
		icon = GFX_goal_italy_leave_the_league_of_nations
		cost = 5
		prerequisite = {
			focus = ITA_revive_the_opera_nazionale_balilla
		}
		prerequisite = {
			focus = ITA_nationalize_the_banking_sector
		}
		mutually_exclusive = {
			focus = ITA_revive_the_stresa_front
		}
		ai_will_do = {
			factor = 120
			modifier = {
				factor = 2
				date > 1938.1.1
			}
		}
		relative_position_id = ITA_nationalize_the_banking_sector
		x = -2
		y = 1
		available = {
			has_government = fascism
		}
		completion_reward = {
			add_political_power = 100
			if = {
				limit = {
					ENG = {
						exists = yes
						has_government = democratic
						is_major = yes
						NOT = {
							original_tag = USA
							has_war_with = ITA
						}
					}
				}
				ENG = {
					add_opinion_modifier = { target = ROOT modifier = small_decrease }
				}
			}
			if = {
				limit = {
					FRA = {
						exists = yes
						has_government = democratic
						is_major = yes
						NOT = {
							original_tag = USA
							has_war_with = ITA
						}
					}
				}
				FRA = {
					add_opinion_modifier = { target = ROOT modifier = small_decrease }
				}
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = ITA_a_way_out
		icon = GFX_focus_generic_monarchy_1
		cost = 14.35
		x = 1
		y = 1
		#relative_position_id = ITA_german_military_assistance
		#prerequisite = {
		#	focus = ITA_german_military_assistance
		#}

		allow_branch = {
			always = no
		}

		available = {
			original_tag = ITA
			surrender_progress < 0.35
			has_government = fascism
			is_in_faction_with = GER
			has_war_together_with = GER
			NOT = { 
				has_completed_focus = ITA_royal_intervention
				AND = { #Defeated In Africa 
					has_full_control_of_state = 559
					has_full_control_of_state = 550
					has_full_control_of_state = 663
					has_full_control_of_state = 449
					has_full_control_of_state = 450
					has_full_control_of_state = 662
					has_full_control_of_state = 661
					has_full_control_of_state = 449
					has_full_control_of_state = 271
				}
				OR = { #Allies did Husky Somewhere
					has_full_control_of_state = 115
					has_full_control_of_state = 156
					has_full_control_of_state = 117
					has_full_control_of_state = 162
					has_full_control_of_state = 2
					has_full_control_of_state = 157
					}
				}
				GER = {
					has_government = fascism
					surrender_progress < 0.10
					has_war_with = ENG
				}
				ENG = {
					has_government = democratic
					surrender_progress < 0.05
					has_war_with = GER
				}
			any_enemy_country = { 
				AND = {
					OR = {
						is_in_faction_with = ENG
						original_tag = ENG
					}
					has_full_control_of_state = 559
					has_full_control_of_state = 550
					has_full_control_of_state = 663
					has_full_control_of_state = 449
					has_full_control_of_state = 450
					has_full_control_of_state = 662
					has_full_control_of_state = 661
					has_full_control_of_state = 449
				}
			}
		}
		select_effect = {
			country_event = { id = soviet.24 days = 1 }
			set_country_flag = r56_ITA_a_way_out_started
		}

		completion_reward = {
			#Order Matters
			set_country_flag = ITA_i_am_the_CLN
			if = {
				limit = {
					is_in_faction_with = GER
					has_war_together_with = GER
				}
				leave_faction = yes
			}
			every_country = {	
				if = {
					limit = { 
						NOT = { original_tag = ITA }
						NOT = { original_tag = ENG }
						has_war_with = ITA
						is_in_faction_with = ENG	
					}
					white_peace = ITA
				}
			}
		}
	}

	focus = {
		id = ITA_pride_of_the_nation
		icon = GFX_goal_generic_propaganda
		cost = 10
		prerequisite = {
			focus = ITA_focus_on_mobilization
		}
		prerequisite = {
			focus = ITA_high_command_loyalty
		}
		x = 37
		y = 5
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			swap_ideas = {
				remove_idea = ITA_the_backbone_of_the_party_2
				add_idea = ITA_pride_of_the_nation
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
}
